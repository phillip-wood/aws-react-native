{"ast":null,"code":"import { API } from 'aws-amplify';\nimport { Auth } from 'aws-amplify';\nimport * as queries from \"../src/graphql/queries\";\nexport var SET_SNEAKERS = 'SET_SNEAKERS';\nexport var SET_SEARCH = 'SET_SEARCH';\nexport var SET_USER = 'SET_USER';\nexport var UPDATE_USER = 'UPDATE_USER';\nexport function setSneakers(sneakers) {\n  return {\n    type: SET_SNEAKERS,\n    sneakers: sneakers\n  };\n}\nexport function setSearch(search) {\n  return {\n    type: SET_SEARCH,\n    search: search\n  };\n}\nexport function setUser(user) {\n  return {\n    type: SET_USER,\n    user: user\n  };\n}\nexport function updateUser(userDetails) {\n  return {\n    type: UPDATE_USER,\n    userDetails: userDetails\n  };\n}\nexport function fetchSneakers() {\n  return function (dispatch) {\n    return API.graphql({\n      query: queries.listSneakers\n    }).then(function (sneakers) {\n      dispatch(setSneakers(sneakers.data.listSneakers.items));\n      return null;\n    });\n  };\n}\nexport function fetchAuthUser() {\n  return function (dispatch) {\n    return Auth.currentAuthenticatedUser({\n      bypassCache: false\n    }).then(function (user) {\n      dispatch(setUser({\n        id: user.attributes.sub,\n        email: user.attributes.email,\n        username: user.attributes.preferred_username,\n        picture: user.attributes.picture\n      }));\n      return null;\n    });\n  };\n}","map":{"version":3,"sources":["/home/phil/Workspace/aws-react-native/actions/index.js"],"names":["API","Auth","queries","SET_SNEAKERS","SET_SEARCH","SET_USER","UPDATE_USER","setSneakers","sneakers","type","setSearch","search","setUser","user","updateUser","userDetails","fetchSneakers","dispatch","graphql","query","listSneakers","then","data","items","fetchAuthUser","currentAuthenticatedUser","bypassCache","id","attributes","sub","email","username","preferred_username","picture"],"mappings":"AAAA,SAASA,GAAT,QAAoB,aAApB;AACA,SAASC,IAAT,QAAqB,aAArB;AAEA,OAAO,KAAKC,OAAZ;AAEA,OAAO,IAAMC,YAAY,GAAG,cAArB;AACP,OAAO,IAAMC,UAAU,GAAG,YAAnB;AACP,OAAO,IAAMC,QAAQ,GAAG,UAAjB;AACP,OAAO,IAAMC,WAAW,GAAG,aAApB;AAEP,OAAO,SAASC,WAAT,CAAsBC,QAAtB,EAAgC;AACrC,SAAO;AACLC,IAAAA,IAAI,EAAEN,YADD;AAELK,IAAAA,QAAQ,EAARA;AAFK,GAAP;AAID;AAED,OAAO,SAASE,SAAT,CAAoBC,MAApB,EAA4B;AACjC,SAAO;AACLF,IAAAA,IAAI,EAAEL,UADD;AAELO,IAAAA,MAAM,EAANA;AAFK,GAAP;AAID;AAED,OAAO,SAASC,OAAT,CAAkBC,IAAlB,EAAwB;AAC7B,SAAO;AACLJ,IAAAA,IAAI,EAAEJ,QADD;AAELQ,IAAAA,IAAI,EAAJA;AAFK,GAAP;AAID;AAED,OAAO,SAASC,UAAT,CAAqBC,WAArB,EAAkC;AACvC,SAAO;AACLN,IAAAA,IAAI,EAAEH,WADD;AAELS,IAAAA,WAAW,EAAXA;AAFK,GAAP;AAID;AAGD,OAAO,SAASC,aAAT,GAA0B;AAC/B,SAAO,UAAAC,QAAQ,EAAI;AACjB,WAAOjB,GAAG,CAACkB,OAAJ,CAAY;AAAEC,MAAAA,KAAK,EAAEjB,OAAO,CAACkB;AAAjB,KAAZ,EACJC,IADI,CACC,UAAAb,QAAQ,EAAI;AAChBS,MAAAA,QAAQ,CAACV,WAAW,CAACC,QAAQ,CAACc,IAAT,CAAcF,YAAd,CAA2BG,KAA5B,CAAZ,CAAR;AACE,aAAO,IAAP;AACH,KAJI,CAAP;AAKD,GAND;AAOD;AAED,OAAO,SAASC,aAAT,GAA0B;AAE/B,SAAO,UAAAP,QAAQ,EAAI;AACjB,WAAOhB,IAAI,CAACwB,wBAAL,CAA8B;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAA9B,EACJL,IADI,CACC,UAAAR,IAAI,EAAI;AACZI,MAAAA,QAAQ,CAACL,OAAO,CAAC;AAACe,QAAAA,EAAE,EAACd,IAAI,CAACe,UAAL,CAAgBC,GAApB;AAAyBC,QAAAA,KAAK,EAAEjB,IAAI,CAACe,UAAL,CAAgBE,KAAhD;AAAuDC,QAAAA,QAAQ,EAAElB,IAAI,CAACe,UAAL,CAAgBI,kBAAjF;AAAqGC,QAAAA,OAAO,EAAEpB,IAAI,CAACe,UAAL,CAAgBK;AAA9H,OAAD,CAAR,CAAR;AACE,aAAO,IAAP;AACL,KAJM,CAAP;AAKD,GAND;AAOD","sourcesContent":["import { API } from 'aws-amplify'\nimport { Auth } from 'aws-amplify'\n\nimport * as queries from '../src/graphql/queries'\n\nexport const SET_SNEAKERS = 'SET_SNEAKERS'\nexport const SET_SEARCH = 'SET_SEARCH'\nexport const SET_USER = 'SET_USER'\nexport const UPDATE_USER = 'UPDATE_USER'\n\nexport function setSneakers (sneakers) {\n  return {\n    type: SET_SNEAKERS,\n    sneakers\n  }\n}\n\nexport function setSearch (search) {\n  return {\n    type: SET_SEARCH,\n    search\n  }\n}\n\nexport function setUser (user) {\n  return {\n    type: SET_USER,\n    user\n  }\n}\n\nexport function updateUser (userDetails) {\n  return {\n    type: UPDATE_USER,\n    userDetails\n  }\n}\n\n\nexport function fetchSneakers () {\n  return dispatch => {\n    return API.graphql({ query: queries.listSneakers })\n      .then(sneakers => {\n        dispatch(setSneakers(sneakers.data.listSneakers.items))\n          return null\n      })\n  }\n}\n\nexport function fetchAuthUser () {\n  \n  return dispatch => {\n    return Auth.currentAuthenticatedUser({ bypassCache: false })\n      .then(user => {\n        dispatch(setUser({id:user.attributes.sub, email: user.attributes.email, username: user.attributes.preferred_username, picture: user.attributes.picture}))\n          return null\n    })\n  }\n}"]},"metadata":{},"sourceType":"module"}