{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/phil/Workspace/aws-react-native/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Amplify, { Auth } from 'aws-amplify';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware, compose } from 'redux';\nimport thunk from 'redux-thunk';\nimport { connect } from 'react-redux';\nvar composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nvar store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)));\nimport reducers from \"./reducers\";\nimport awsconfig from \"./src/aws-exports\";\nAmplify.configure(awsconfig);\nimport AuthNavigator from \"./app/componets/navigation/AuthNavigator\";\nimport AppNavigator from \"./app/componets/navigation/AppNavigator\";\nimport Initializing from \"./app/componets/navigation/Initializing\";\n\nfunction App(props) {\n  var _useState = useState('initializing'),\n      _useState2 = _slicedToArray(_useState, 2),\n      isUserLoggedIn = _useState2[0],\n      setUserLoggedIn = _useState2[1];\n\n  useEffect(function () {\n    checkAuthState();\n    console.log(props);\n  }, []);\n\n  function checkAuthState() {\n    return _regeneratorRuntime.async(function checkAuthState$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(Auth.currentAuthenticatedUser());\n\n          case 3:\n            console.log('✅ User is signed in');\n            setUserLoggedIn('loggedIn');\n            _context.next = 11;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log('❌ User is not signed in');\n            setUserLoggedIn('loggedOut');\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  }\n\n  function updateAuthState(isUserLoggedIn) {\n    setUserLoggedIn(isUserLoggedIn);\n  }\n\n  return React.createElement(Provider, {\n    store: store,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 3\n    }\n  }, React.createElement(NavigationContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, isUserLoggedIn === 'initializing' && React.createElement(Initializing, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 45\n    }\n  }), isUserLoggedIn === 'loggedIn' && React.createElement(AppNavigator, {\n    updateAuthState: updateAuthState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }), isUserLoggedIn === 'loggedOut' && React.createElement(AuthNavigator, {\n    updateAuthState: updateAuthState,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 11\n    }\n  })));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/phil/Workspace/aws-react-native/App.js"],"names":["React","useState","useEffect","Amplify","Auth","NavigationContainer","Provider","createStore","applyMiddleware","compose","thunk","connect","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","store","reducers","awsconfig","configure","AuthNavigator","AppNavigator","Initializing","App","props","isUserLoggedIn","setUserLoggedIn","checkAuthState","console","log","currentAuthenticatedUser","updateAuthState"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,OAAP,IAAkBC,IAAlB,QAA8B,aAA9B;AACA,SAASC,mBAAT,QAAoC,0BAApC;AAEA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,WAAT,EAAsBC,eAAtB,EAAuCC,OAAvC,QAAsD,OAAtD;AACA,OAAOC,KAAP,MAAkB,aAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AAGA,IAAMC,gBAAgB,GAAGC,MAAM,CAACC,oCAAP,IAA+CL,OAAxE;AACA,IAAMM,KAAK,GAAGR,WAAW,CAACS,QAAD,EAAWJ,gBAAgB,CAACJ,eAAe,CAACE,KAAD,CAAhB,CAA3B,CAAzB;AAEA,OAAOM,QAAP;AAEA,OAAOC,SAAP;AACAd,OAAO,CAACe,SAAR,CAAkBD,SAAlB;AAEA,OAAOE,aAAP;AACA,OAAOC,YAAP;AACA,OAAOC,YAAP;;AAKA,SAASC,GAAT,CAAaC,KAAb,EAAoB;AAAA,kBACwBtB,QAAQ,CAAC,cAAD,CADhC;AAAA;AAAA,MACXuB,cADW;AAAA,MACKC,eADL;;AAGlBvB,EAAAA,SAAS,CAAC,YAAM;AACdwB,IAAAA,cAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYL,KAAZ;AACD,GAHQ,EAGN,EAHM,CAAT;;AAKA,WAAeG,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAEUtB,IAAI,CAACyB,wBAAL,EAFV;;AAAA;AAGIF,YAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAH,YAAAA,eAAe,CAAC,UAAD,CAAf;AAJJ;AAAA;;AAAA;AAAA;AAAA;AAMIE,YAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACAH,YAAAA,eAAe,CAAC,WAAD,CAAf;;AAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUA,WAASK,eAAT,CAAyBN,cAAzB,EAAyC;AACvCC,IAAAA,eAAe,CAACD,cAAD,CAAf;AACD;;AAEH,SACE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAET,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,mBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGS,cAAc,KAAK,cAAnB,IAAqC,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADxC,EAEKA,cAAc,KAAK,UAAnB,IACC,oBAAC,YAAD;AAAc,IAAA,eAAe,EAAEM,eAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHN,EAKKN,cAAc,KAAK,WAAnB,IACC,oBAAC,aAAD;AAAe,IAAA,eAAe,EAAEM,eAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANN,CADF,CADF;AAaC;;AAED,eAAeR,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Amplify, { Auth } from 'aws-amplify'\nimport { NavigationContainer } from '@react-navigation/native'\n\nimport { Provider } from 'react-redux'\nimport { createStore, applyMiddleware, compose } from 'redux'\nimport thunk from 'redux-thunk'\nimport { connect } from 'react-redux'\n\n\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunk)))\n\nimport reducers from './reducers'\n\nimport awsconfig from './src/aws-exports'\nAmplify.configure(awsconfig)\n\nimport AuthNavigator from './app/componets/navigation/AuthNavigator'\nimport AppNavigator from './app/componets/navigation/AppNavigator'\nimport Initializing from './app/componets/navigation/Initializing'\n\n\n\n\nfunction App(props) {\n  const [isUserLoggedIn, setUserLoggedIn] = useState('initializing')\n\n  useEffect(() => {\n    checkAuthState()\n    console.log(props)\n  }, [])\n  \n  async function checkAuthState() {\n    try {\n      await Auth.currentAuthenticatedUser()\n      console.log('✅ User is signed in')\n      setUserLoggedIn('loggedIn')\n    } catch (err) {\n      console.log('❌ User is not signed in')\n      setUserLoggedIn('loggedOut')\n    }\n  }\n  function updateAuthState(isUserLoggedIn) {\n    setUserLoggedIn(isUserLoggedIn)\n  }\n\nreturn (\n  <Provider store={store}>\n    <NavigationContainer>\n      {isUserLoggedIn === 'initializing' && <Initializing />}\n        {isUserLoggedIn === 'loggedIn' && (\n          <AppNavigator updateAuthState={updateAuthState} />\n        )}\n        {isUserLoggedIn === 'loggedOut' && (\n          <AuthNavigator updateAuthState={updateAuthState} />\n        )}\n    </NavigationContainer>\n  </Provider>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}