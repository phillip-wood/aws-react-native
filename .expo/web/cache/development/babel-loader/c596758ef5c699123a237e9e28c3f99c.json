{"ast":null,"code":"'use strict';\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _class, _class2, _temp;\n\nvar _NativeMethodsDecorator = require(\"../../modules/NativeMethodsDecorator\");\n\nvar _NativeMethodsDecorator2 = _interopRequireDefault(_NativeMethodsDecorator);\n\nvar _resolveAssetSource = require(\"./resolveAssetSource\");\n\nvar _resolveAssetSource2 = _interopRequireDefault(_resolveAssetSource);\n\nvar _CoreComponent = require(\"../CoreComponent\");\n\nvar _CoreComponent2 = _interopRequireDefault(_CoreComponent);\n\nvar _ImageResizeMode = require(\"./ImageResizeMode\");\n\nvar _ImageResizeMode2 = _interopRequireDefault(_ImageResizeMode);\n\nvar _ImageStylePropTypes = require(\"./ImageStylePropTypes\");\n\nvar _ImageStylePropTypes2 = _interopRequireDefault(_ImageStylePropTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _StyleSheet = require(\"../../apis/StyleSheet\");\n\nvar _StyleSheet2 = _interopRequireDefault(_StyleSheet);\n\nvar _StyleSheetPropType = require(\"../../apis/StyleSheet/StyleSheetPropType\");\n\nvar _StyleSheetPropType2 = _interopRequireDefault(_StyleSheetPropType);\n\nvar _View = require(\"../View\");\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar STATUS_ERRORED = 'ERRORED';\nvar STATUS_LOADED = 'LOADED';\nvar STATUS_LOADING = 'LOADING';\nvar STATUS_PENDING = 'PENDING';\nvar STATUS_IDLE = 'IDLE';\n\nvar ImageSourcePropType = _react.PropTypes.oneOfType([_react.PropTypes.shape({\n  uri: _react.PropTypes.string.isRequired\n}), _react.PropTypes.string]);\n\nvar Image = (0, _NativeMethodsDecorator2.default)(_class = (_temp = _class2 = function (_Component) {\n  _inherits(Image, _Component);\n\n  function Image(props, context) {\n    _classCallCheck(this, Image);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Image).call(this, props, context));\n\n    var uri = (0, _resolveAssetSource2.default)(props.source);\n    _this.state = {\n      status: uri ? STATUS_PENDING : STATUS_IDLE\n    };\n    _this._onError = _this._onError.bind(_this);\n    _this._onLoad = _this._onLoad.bind(_this);\n    return _this;\n  }\n\n  _createClass(Image, [{\n    key: '_createImageLoader',\n    value: function _createImageLoader() {\n      var uri = (0, _resolveAssetSource2.default)(this.props.source);\n\n      this._destroyImageLoader();\n\n      this.image = new window.Image();\n      this.image.onerror = this._onError;\n      this.image.onload = this._onLoad;\n      this.image.src = uri;\n\n      this._onLoadStart();\n    }\n  }, {\n    key: '_destroyImageLoader',\n    value: function _destroyImageLoader() {\n      if (this.image) {\n        this.image.onerror = null;\n        this.image.onload = null;\n        this.image = null;\n      }\n    }\n  }, {\n    key: '_onError',\n    value: function _onError(e) {\n      var onError = this.props.onError;\n      var event = {\n        nativeEvent: e\n      };\n\n      this._destroyImageLoader();\n\n      this.setState({\n        status: STATUS_ERRORED\n      });\n\n      this._onLoadEnd();\n\n      if (onError) onError(event);\n    }\n  }, {\n    key: '_onLoad',\n    value: function _onLoad(e) {\n      var onLoad = this.props.onLoad;\n      var event = {\n        nativeEvent: e\n      };\n\n      this._destroyImageLoader();\n\n      this.setState({\n        status: STATUS_LOADED\n      });\n      if (onLoad) onLoad(event);\n\n      this._onLoadEnd();\n    }\n  }, {\n    key: '_onLoadEnd',\n    value: function _onLoadEnd() {\n      var onLoadEnd = this.props.onLoadEnd;\n      if (onLoadEnd) onLoadEnd();\n    }\n  }, {\n    key: '_onLoadStart',\n    value: function _onLoadStart() {\n      var onLoadStart = this.props.onLoadStart;\n      this.setState({\n        status: STATUS_LOADING\n      });\n      if (onLoadStart) onLoadStart();\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.state.status === STATUS_PENDING) {\n        this._createImageLoader();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.state.status === STATUS_PENDING && !this.image) {\n        this._createImageLoader();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var nextUri = (0, _resolveAssetSource2.default)(nextProps.source);\n\n      if ((0, _resolveAssetSource2.default)(this.props.source) !== nextUri) {\n        this.setState({\n          status: nextUri ? STATUS_PENDING : STATUS_IDLE\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._destroyImageLoader();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props;\n      var accessibilityLabel = _props.accessibilityLabel;\n      var accessible = _props.accessible;\n      var children = _props.children;\n      var defaultSource = _props.defaultSource;\n      var source = _props.source;\n      var testID = _props.testID;\n      var isLoaded = this.state.status === STATUS_LOADED;\n      var displayImage = (0, _resolveAssetSource2.default)(!isLoaded ? defaultSource : source);\n      var backgroundImage = displayImage ? 'url(\"' + displayImage + '\")' : null;\n\n      var style = _StyleSheet2.default.flatten(this.props.style);\n\n      var resizeMode = this.props.resizeMode || style.resizeMode || _ImageResizeMode2.default.cover;\n      delete style.resizeMode;\n      return _react2.default.createElement(_View2.default, {\n        accessibilityLabel: accessibilityLabel,\n        accessibilityRole: 'img',\n        accessible: accessible,\n        style: [styles.initial, style, backgroundImage && {\n          backgroundImage: backgroundImage\n        }, resizeModeStyles[resizeMode]],\n        testID: testID\n      }, _react2.default.createElement('img', {\n        src: displayImage,\n        style: styles.img\n      }), children ? _react2.default.createElement(_View2.default, {\n        children: children,\n        pointerEvents: 'box-none',\n        style: styles.children\n      }) : null);\n    }\n  }]);\n\n  return Image;\n}(_react.Component), _class2.propTypes = {\n  accessibilityLabel: _CoreComponent2.default.propTypes.accessibilityLabel,\n  accessible: _CoreComponent2.default.propTypes.accessible,\n  children: _react.PropTypes.any,\n  defaultSource: ImageSourcePropType,\n  onError: _react.PropTypes.func,\n  onLoad: _react.PropTypes.func,\n  onLoadEnd: _react.PropTypes.func,\n  onLoadStart: _react.PropTypes.func,\n  resizeMode: _react.PropTypes.oneOf(['contain', 'cover', 'none', 'stretch']),\n  source: ImageSourcePropType,\n  style: (0, _StyleSheetPropType2.default)(_ImageStylePropTypes2.default),\n  testID: _CoreComponent2.default.propTypes.testID\n}, _class2.defaultProps = {\n  accessible: true,\n  style: {}\n}, _class2.resizeMode = _ImageResizeMode2.default, _temp)) || _class;\n\nvar styles = _StyleSheet2.default.create({\n  initial: {\n    alignSelf: 'flex-start',\n    backgroundColor: 'transparent',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover'\n  },\n  img: {\n    borderWidth: 0,\n    height: 'auto',\n    maxHeight: '100%',\n    maxWidth: '100%',\n    opacity: 0\n  },\n  children: {\n    bottom: 0,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0\n  }\n});\n\nvar resizeModeStyles = _StyleSheet2.default.create({\n  contain: {\n    backgroundSize: 'contain'\n  },\n  cover: {\n    backgroundSize: 'cover'\n  },\n  none: {\n    backgroundSize: 'auto'\n  },\n  stretch: {\n    backgroundSize: '100% 100%'\n  }\n});\n\nmodule.exports = Image;","map":{"version":3,"sources":["/home/phil/Workspace/aws-react-native/node_modules/react-native-web/dist/components/Image/index.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_class","_class2","_temp","_NativeMethodsDecorator","require","_NativeMethodsDecorator2","_interopRequireDefault","_resolveAssetSource","_resolveAssetSource2","_CoreComponent","_CoreComponent2","_ImageResizeMode","_ImageResizeMode2","_ImageStylePropTypes","_ImageStylePropTypes2","_react","_react2","_StyleSheet","_StyleSheet2","_StyleSheetPropType","_StyleSheetPropType2","_View","_View2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","STATUS_ERRORED","STATUS_LOADED","STATUS_LOADING","STATUS_PENDING","STATUS_IDLE","ImageSourcePropType","PropTypes","oneOfType","shape","uri","string","isRequired","Image","_Component","context","_this","getPrototypeOf","source","state","status","_onError","bind","_onLoad","_createImageLoader","_destroyImageLoader","image","window","onerror","onload","src","_onLoadStart","e","onError","event","nativeEvent","setState","_onLoadEnd","onLoad","onLoadEnd","onLoadStart","componentDidMount","componentDidUpdate","componentWillReceiveProps","nextProps","nextUri","componentWillUnmount","render","_props","accessibilityLabel","accessible","children","defaultSource","testID","isLoaded","displayImage","backgroundImage","style","flatten","resizeMode","cover","createElement","accessibilityRole","styles","initial","resizeModeStyles","img","pointerEvents","Component","propTypes","any","func","oneOf","defaultProps","alignSelf","backgroundColor","backgroundPosition","backgroundRepeat","backgroundSize","borderWidth","height","maxHeight","maxWidth","opacity","bottom","left","position","right","top","contain","none","stretch","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _class, _class2, _temp; /* global window */\n\nvar _NativeMethodsDecorator = require('../../modules/NativeMethodsDecorator');\n\nvar _NativeMethodsDecorator2 = _interopRequireDefault(_NativeMethodsDecorator);\n\nvar _resolveAssetSource = require('./resolveAssetSource');\n\nvar _resolveAssetSource2 = _interopRequireDefault(_resolveAssetSource);\n\nvar _CoreComponent = require('../CoreComponent');\n\nvar _CoreComponent2 = _interopRequireDefault(_CoreComponent);\n\nvar _ImageResizeMode = require('./ImageResizeMode');\n\nvar _ImageResizeMode2 = _interopRequireDefault(_ImageResizeMode);\n\nvar _ImageStylePropTypes = require('./ImageStylePropTypes');\n\nvar _ImageStylePropTypes2 = _interopRequireDefault(_ImageStylePropTypes);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _StyleSheet = require('../../apis/StyleSheet');\n\nvar _StyleSheet2 = _interopRequireDefault(_StyleSheet);\n\nvar _StyleSheetPropType = require('../../apis/StyleSheet/StyleSheetPropType');\n\nvar _StyleSheetPropType2 = _interopRequireDefault(_StyleSheetPropType);\n\nvar _View = require('../View');\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar STATUS_ERRORED = 'ERRORED';\nvar STATUS_LOADED = 'LOADED';\nvar STATUS_LOADING = 'LOADING';\nvar STATUS_PENDING = 'PENDING';\nvar STATUS_IDLE = 'IDLE';\n\nvar ImageSourcePropType = _react.PropTypes.oneOfType([_react.PropTypes.shape({\n  uri: _react.PropTypes.string.isRequired\n}), _react.PropTypes.string]);\n\nvar Image = (0, _NativeMethodsDecorator2.default)(_class = (_temp = _class2 = (function (_Component) {\n  _inherits(Image, _Component);\n\n  function Image(props, context) {\n    _classCallCheck(this, Image);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Image).call(this, props, context));\n\n    var uri = (0, _resolveAssetSource2.default)(props.source);\n    // state\n    _this.state = { status: uri ? STATUS_PENDING : STATUS_IDLE };\n    // autobinding\n    _this._onError = _this._onError.bind(_this);\n    _this._onLoad = _this._onLoad.bind(_this);\n    return _this;\n  }\n\n  _createClass(Image, [{\n    key: '_createImageLoader',\n    value: function _createImageLoader() {\n      var uri = (0, _resolveAssetSource2.default)(this.props.source);\n\n      this._destroyImageLoader();\n      this.image = new window.Image();\n      this.image.onerror = this._onError;\n      this.image.onload = this._onLoad;\n      this.image.src = uri;\n      this._onLoadStart();\n    }\n  }, {\n    key: '_destroyImageLoader',\n    value: function _destroyImageLoader() {\n      if (this.image) {\n        this.image.onerror = null;\n        this.image.onload = null;\n        this.image = null;\n      }\n    }\n  }, {\n    key: '_onError',\n    value: function _onError(e) {\n      var onError = this.props.onError;\n\n      var event = { nativeEvent: e };\n\n      this._destroyImageLoader();\n      this.setState({ status: STATUS_ERRORED });\n      this._onLoadEnd();\n      if (onError) onError(event);\n    }\n  }, {\n    key: '_onLoad',\n    value: function _onLoad(e) {\n      var onLoad = this.props.onLoad;\n\n      var event = { nativeEvent: e };\n\n      this._destroyImageLoader();\n      this.setState({ status: STATUS_LOADED });\n      if (onLoad) onLoad(event);\n      this._onLoadEnd();\n    }\n  }, {\n    key: '_onLoadEnd',\n    value: function _onLoadEnd() {\n      var onLoadEnd = this.props.onLoadEnd;\n\n      if (onLoadEnd) onLoadEnd();\n    }\n  }, {\n    key: '_onLoadStart',\n    value: function _onLoadStart() {\n      var onLoadStart = this.props.onLoadStart;\n\n      this.setState({ status: STATUS_LOADING });\n      if (onLoadStart) onLoadStart();\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (this.state.status === STATUS_PENDING) {\n        this._createImageLoader();\n      }\n    }\n  }, {\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate() {\n      if (this.state.status === STATUS_PENDING && !this.image) {\n        this._createImageLoader();\n      }\n    }\n  }, {\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(nextProps) {\n      var nextUri = (0, _resolveAssetSource2.default)(nextProps.source);\n      if ((0, _resolveAssetSource2.default)(this.props.source) !== nextUri) {\n        this.setState({\n          status: nextUri ? STATUS_PENDING : STATUS_IDLE\n        });\n      }\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      this._destroyImageLoader();\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _props = this.props;\n      var accessibilityLabel = _props.accessibilityLabel;\n      var accessible = _props.accessible;\n      var children = _props.children;\n      var defaultSource = _props.defaultSource;\n      var source = _props.source;\n      var testID = _props.testID;\n\n      var isLoaded = this.state.status === STATUS_LOADED;\n      var displayImage = (0, _resolveAssetSource2.default)(!isLoaded ? defaultSource : source);\n      var backgroundImage = displayImage ? 'url(\"' + displayImage + '\")' : null;\n      var style = _StyleSheet2.default.flatten(this.props.style);\n\n      var resizeMode = this.props.resizeMode || style.resizeMode || _ImageResizeMode2.default.cover;\n      // remove resizeMode style, as it is not supported by View\n      delete style.resizeMode;\n\n      /**\n       * Image is a non-stretching View. The image is displayed as a background\n       * image to support `resizeMode`. The HTML image is hidden but used to\n       * provide the correct responsive image dimensions, and to support the\n       * image context menu. Child content is rendered into an element absolutely\n       * positioned over the image.\n       */\n      return _react2.default.createElement(\n        _View2.default,\n        {\n          accessibilityLabel: accessibilityLabel,\n          accessibilityRole: 'img',\n          accessible: accessible,\n          style: [styles.initial, style, backgroundImage && { backgroundImage: backgroundImage }, resizeModeStyles[resizeMode]],\n          testID: testID\n        },\n        _react2.default.createElement('img', { src: displayImage, style: styles.img }),\n        children ? _react2.default.createElement(_View2.default, { children: children, pointerEvents: 'box-none', style: styles.children }) : null\n      );\n    }\n  }]);\n\n  return Image;\n})(_react.Component), _class2.propTypes = {\n  accessibilityLabel: _CoreComponent2.default.propTypes.accessibilityLabel,\n  accessible: _CoreComponent2.default.propTypes.accessible,\n  children: _react.PropTypes.any,\n  defaultSource: ImageSourcePropType,\n  onError: _react.PropTypes.func,\n  onLoad: _react.PropTypes.func,\n  onLoadEnd: _react.PropTypes.func,\n  onLoadStart: _react.PropTypes.func,\n  resizeMode: _react.PropTypes.oneOf(['contain', 'cover', 'none', 'stretch']),\n  source: ImageSourcePropType,\n  style: (0, _StyleSheetPropType2.default)(_ImageStylePropTypes2.default),\n  testID: _CoreComponent2.default.propTypes.testID\n}, _class2.defaultProps = {\n  accessible: true,\n  style: {}\n}, _class2.resizeMode = _ImageResizeMode2.default, _temp)) || _class;\n\nvar styles = _StyleSheet2.default.create({\n  initial: {\n    alignSelf: 'flex-start',\n    backgroundColor: 'transparent',\n    backgroundPosition: 'center',\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover'\n  },\n  img: {\n    borderWidth: 0,\n    height: 'auto',\n    maxHeight: '100%',\n    maxWidth: '100%',\n    opacity: 0\n  },\n  children: {\n    bottom: 0,\n    left: 0,\n    position: 'absolute',\n    right: 0,\n    top: 0\n  }\n});\n\nvar resizeModeStyles = _StyleSheet2.default.create({\n  contain: {\n    backgroundSize: 'contain'\n  },\n  cover: {\n    backgroundSize: 'cover'\n  },\n  none: {\n    backgroundSize: 'auto'\n  },\n  stretch: {\n    backgroundSize: '100% 100%'\n  }\n});\n\nmodule.exports = Image;"]},"metadata":{},"sourceType":"script"}