{"ast":null,"code":"import { Auth } from 'aws-amplify';\nimport { updateUser } from \"../actions/index\";\nexport function authSignUp(username, password, preferred_username, picture, navigation) {\n  Auth.signUp({\n    username: username,\n    password: password,\n    attributes: {\n      preferred_username: preferred_username,\n      picture: picture\n    }\n  }).then(navigation.navigate('ConfirmSignUp')).catch(function (err) {\n    return console.log('❌ Error Signing Up', err);\n  });\n}\nexport function fetchAuthUser() {\n  return function (dispatch) {\n    return Auth.currentAuthenticatedUser({\n      bypassCache: false\n    }).then(function (user) {\n      dispatch(setUser({\n        id: user.attributes.sub,\n        email: user.attributes.email,\n        username: user.attributes.preferred_username,\n        picture: user.attributes.picture\n      }));\n      return null;\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n}\nexport function updatePreferred_username(payload, dispatch, navigation) {\n  Auth.currentAuthenticatedUser().then(function (user) {\n    return Auth.updateUserAttributes(user, {\n      \"preferred_username\": payload\n    });\n  }).then(function (response) {\n    return alert(response);\n  }).then(dispatch(updateUser(payload))).catch(function (err) {\n    return alert(err.message);\n  });\n}\nexport function updatePassword(oldPassword, newPassword) {\n  Auth.currentAuthenticatedUser().then(function (user) {\n    return Auth.changePassword(user, oldPassword, newPassword);\n  }).then(function (response) {\n    return alert(response);\n  }).catch(function (err) {\n    return alert(err.message);\n  });\n}","map":{"version":3,"sources":["/home/phil/Workspace/aws-react-native/apis/auth.js"],"names":["Auth","updateUser","authSignUp","username","password","preferred_username","picture","navigation","signUp","attributes","then","navigate","catch","err","console","log","fetchAuthUser","dispatch","currentAuthenticatedUser","bypassCache","user","setUser","id","sub","email","updatePreferred_username","payload","updateUserAttributes","response","alert","message","updatePassword","oldPassword","newPassword","changePassword"],"mappings":"AAAA,SAASA,IAAT,QAAqB,aAArB;AACA,SAASC,UAAT;AAGA,OAAO,SAASC,UAAT,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyCC,kBAAzC,EAA6DC,OAA7D,EAAsEC,UAAtE,EAAmF;AACxFP,EAAAA,IAAI,CAACQ,MAAL,CAAY;AAAEL,IAAAA,QAAQ,EAARA,QAAF;AAAYC,IAAAA,QAAQ,EAARA,QAAZ;AAAsBK,IAAAA,UAAU,EAAE;AAAEJ,MAAAA,kBAAkB,EAAlBA,kBAAF;AAAsBC,MAAAA,OAAO,EAAPA;AAAtB;AAAlC,GAAZ,EACGI,IADH,CACSH,UAAU,CAACI,QAAX,CAAqB,eAArB,CADT,EAEGC,KAFH,CAEU,UAAAC,GAAG;AAAA,WAAIC,OAAO,CAACC,GAAR,CAAa,oBAAb,EAAoCF,GAApC,CAAJ;AAAA,GAFb;AAGD;AAID,OAAO,SAASG,aAAT,GAA0B;AAC/B,SAAO,UAAAC,QAAQ,EAAI;AACjB,WAAOjB,IAAI,CAACkB,wBAAL,CAA8B;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAA9B,EACJT,IADI,CACC,UAAAU,IAAI,EAAI;AACZH,MAAAA,QAAQ,CAAEI,OAAO,CAAC;AAChBC,QAAAA,EAAE,EAACF,IAAI,CAACX,UAAL,CAAgBc,GADH;AAEhBC,QAAAA,KAAK,EAAEJ,IAAI,CAACX,UAAL,CAAgBe,KAFP;AAGhBrB,QAAAA,QAAQ,EAAEiB,IAAI,CAACX,UAAL,CAAgBJ,kBAHV;AAIhBC,QAAAA,OAAO,EAAEc,IAAI,CAACX,UAAL,CAAgBH;AAJT,OAAD,CAAT,CAAR;AAME,aAAO,IAAP;AACL,KATM,EAUNM,KAVM,CAUC,UAAAC,GAAG;AAAA,aAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ;AAAA,KAVJ,CAAP;AAWD,GAZD;AAaD;AAMD,OAAO,SAASY,wBAAT,CAAmCC,OAAnC,EAA4CT,QAA5C,EAAsDV,UAAtD,EAAmE;AACxEP,EAAAA,IAAI,CAACkB,wBAAL,GACGR,IADH,CACS,UAAAU,IAAI,EAAI;AAAE,WAAOpB,IAAI,CAAC2B,oBAAL,CAA2BP,IAA3B,EAAiC;AAAE,4BAAsBM;AAAxB,KAAjC,CAAP;AAA2E,GAD9F,EAEGhB,IAFH,CAES,UAAAkB,QAAQ;AAAA,WAAIC,KAAK,CAAED,QAAF,CAAT;AAAA,GAFjB,EAGGlB,IAHH,CAGSO,QAAQ,CAAEhB,UAAU,CAAEyB,OAAF,CAAZ,CAHjB,EAIGd,KAJH,CAIU,UAAAC,GAAG;AAAA,WAAIgB,KAAK,CAAEhB,GAAG,CAACiB,OAAN,CAAT;AAAA,GAJb;AAKD;AAGD,OAAO,SAASC,cAAT,CAAyBC,WAAzB,EAAsCC,WAAtC,EAAoD;AACzDjC,EAAAA,IAAI,CAACkB,wBAAL,GACGR,IADH,CACS,UAAAU,IAAI,EAAI;AAAE,WAAOpB,IAAI,CAACkC,cAAL,CAAqBd,IAArB,EAA2BY,WAA3B,EAAwCC,WAAxC,CAAP;AAA8D,GADjF,EAEGvB,IAFH,CAES,UAAAkB,QAAQ;AAAA,WAAIC,KAAK,CAAED,QAAF,CAAT;AAAA,GAFjB,EAGGhB,KAHH,CAGU,UAAAC,GAAG;AAAA,WAAIgB,KAAK,CAAEhB,GAAG,CAACiB,OAAN,CAAT;AAAA,GAHb;AAID","sourcesContent":["import { Auth } from 'aws-amplify'\nimport { updateUser,  } from '../actions/index'\n\n//-----CREATE-----//\nexport function authSignUp( username, password, preferred_username, picture, navigation ) {\n  Auth.signUp({ username, password, attributes: { preferred_username, picture } })\n    .then( navigation.navigate( 'ConfirmSignUp' ))\n    .catch( err => console.log( '❌ Error Signing Up' , err ))\n}\n//-----CREATE-----//\n\n//-----READ-----//\nexport function fetchAuthUser () {\n  return dispatch => {\n    return Auth.currentAuthenticatedUser({ bypassCache: false })\n      .then(user => {\n        dispatch( setUser({\n          id:user.attributes.sub, \n          email: user.attributes.email, \n          username: user.attributes.preferred_username, \n          picture: user.attributes.picture\n        }))\n          return null\n    })\n    .catch( err => console.log(err))\n  }\n}\n\n\n\n\n\nexport function updatePreferred_username( payload, dispatch, navigation ) { \n  Auth.currentAuthenticatedUser()\n    .then( user => { return Auth.updateUserAttributes( user, { \"preferred_username\": payload })}) \n    .then( response => alert( response ))\n    .then( dispatch( updateUser( payload )))\n    .catch( err => alert( err.message ))\n}\n\n//used by UserDetails screen\nexport function updatePassword( oldPassword, newPassword ) { \n  Auth.currentAuthenticatedUser()\n    .then( user => { return Auth.changePassword( user, oldPassword, newPassword ) })\n    .then( response => alert( response )) \n    .catch( err => alert( err.message ))\n}\n"]},"metadata":{},"sourceType":"module"}