{"ast":null,"code":"'use strict';\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _Easing = require(\"../Easing\");\n\nvar _Easing2 = _interopRequireDefault(_Easing);\n\nvar _flattenStyle = require(\"../StyleSheet/flattenStyle\");\n\nvar _flattenStyle2 = _interopRequireDefault(_flattenStyle);\n\nvar _InteractionManager = require(\"../InteractionManager\");\n\nvar _InteractionManager2 = _interopRequireDefault(_InteractionManager);\n\nvar _Interpolation = require(\"./Interpolation\");\n\nvar _Interpolation2 = _interopRequireDefault(_Interpolation);\n\nvar _invariant = require('fbjs/lib/invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Set = require(\"./polyfills/Set\");\n\nvar _Set2 = _interopRequireDefault(_Set);\n\nvar _SpringConfig = require(\"./SpringConfig\");\n\nvar _SpringConfig2 = _interopRequireDefault(_SpringConfig);\n\nvar _ViewStylePropTypes = require(\"../../components/View/ViewStylePropTypes\");\n\nvar _ViewStylePropTypes2 = _interopRequireDefault(_ViewStylePropTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar Animated = function () {\n  function Animated() {\n    _classCallCheck(this, Animated);\n  }\n\n  _createClass(Animated, [{\n    key: '__attach',\n    value: function __attach() {}\n  }, {\n    key: '__detach',\n    value: function __detach() {}\n  }, {\n    key: '__getValue',\n    value: function __getValue() {}\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      return this.__getValue();\n    }\n  }, {\n    key: '__addChild',\n    value: function __addChild(child) {}\n  }, {\n    key: '__removeChild',\n    value: function __removeChild(child) {}\n  }, {\n    key: '__getChildren',\n    value: function __getChildren() {\n      return [];\n    }\n  }]);\n\n  return Animated;\n}();\n\nvar Animation = function () {\n  function Animation() {\n    _classCallCheck(this, Animation);\n  }\n\n  _createClass(Animation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd, previousAnimation) {}\n  }, {\n    key: 'stop',\n    value: function stop() {}\n  }, {\n    key: '__debouncedOnEnd',\n    value: function __debouncedOnEnd(result) {\n      var onEnd = this.__onEnd;\n      this.__onEnd = null;\n      onEnd && onEnd(result);\n    }\n  }]);\n\n  return Animation;\n}();\n\nvar AnimatedWithChildren = function (_Animated) {\n  _inherits(AnimatedWithChildren, _Animated);\n\n  function AnimatedWithChildren() {\n    _classCallCheck(this, AnimatedWithChildren);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedWithChildren).call(this));\n\n    _this._children = [];\n    return _this;\n  }\n\n  _createClass(AnimatedWithChildren, [{\n    key: '__addChild',\n    value: function __addChild(child) {\n      if (this._children.length === 0) {\n        this.__attach();\n      }\n\n      this._children.push(child);\n    }\n  }, {\n    key: '__removeChild',\n    value: function __removeChild(child) {\n      var index = this._children.indexOf(child);\n\n      if (index === -1) {\n        console.warn('Trying to remove a child that doesn\\'t exist');\n        return;\n      }\n\n      this._children.splice(index, 1);\n\n      if (this._children.length === 0) {\n        this.__detach();\n      }\n    }\n  }, {\n    key: '__getChildren',\n    value: function __getChildren() {\n      return this._children;\n    }\n  }]);\n\n  return AnimatedWithChildren;\n}(Animated);\n\nfunction _flush(rootNode) {\n  var animatedStyles = new _Set2.default();\n\n  function findAnimatedStyles(node) {\n    if (typeof node.update === 'function') {\n      animatedStyles.add(node);\n    } else {\n      node.__getChildren().forEach(findAnimatedStyles);\n    }\n  }\n\n  findAnimatedStyles(rootNode);\n  animatedStyles.forEach(function (animatedStyle) {\n    return animatedStyle.update();\n  });\n}\n\nvar easeInOut = _Easing2.default.inOut(_Easing2.default.ease);\n\nvar TimingAnimation = function (_Animation) {\n  _inherits(TimingAnimation, _Animation);\n\n  function TimingAnimation(config) {\n    _classCallCheck(this, TimingAnimation);\n\n    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(TimingAnimation).call(this));\n\n    _this2._toValue = config.toValue;\n    _this2._easing = config.easing !== undefined ? config.easing : easeInOut;\n    _this2._duration = config.duration !== undefined ? config.duration : 500;\n    _this2._delay = config.delay !== undefined ? config.delay : 0;\n    _this2.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    return _this2;\n  }\n\n  _createClass(TimingAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd) {\n      var _this3 = this;\n\n      this.__active = true;\n      this._fromValue = fromValue;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n\n      var start = function start() {\n        if (_this3._duration === 0) {\n          _this3._onUpdate(_this3._toValue);\n\n          _this3.__debouncedOnEnd({\n            finished: true\n          });\n        } else {\n          _this3._startTime = Date.now();\n          _this3._animationFrame = requestAnimationFrame(_this3.onUpdate.bind(_this3));\n        }\n      };\n\n      if (this._delay) {\n        this._timeout = setTimeout(start, this._delay);\n      } else {\n        start();\n      }\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var now = Date.now();\n\n      if (now >= this._startTime + this._duration) {\n        if (this._duration === 0) {\n          this._onUpdate(this._toValue);\n        } else {\n          this._onUpdate(this._fromValue + this._easing(1) * (this._toValue - this._fromValue));\n        }\n\n        this.__debouncedOnEnd({\n          finished: true\n        });\n\n        return;\n      }\n\n      this._onUpdate(this._fromValue + this._easing((now - this._startTime) / this._duration) * (this._toValue - this._fromValue));\n\n      if (this.__active) {\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      clearTimeout(this._timeout);\n      window.cancelAnimationFrame(this._animationFrame);\n\n      this.__debouncedOnEnd({\n        finished: false\n      });\n    }\n  }]);\n\n  return TimingAnimation;\n}(Animation);\n\nvar DecayAnimation = function (_Animation2) {\n  _inherits(DecayAnimation, _Animation2);\n\n  function DecayAnimation(config) {\n    _classCallCheck(this, DecayAnimation);\n\n    var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(DecayAnimation).call(this));\n\n    _this4._deceleration = config.deceleration !== undefined ? config.deceleration : 0.998;\n    _this4._velocity = config.velocity;\n    _this4.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    return _this4;\n  }\n\n  _createClass(DecayAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd) {\n      this.__active = true;\n      this._lastValue = fromValue;\n      this._fromValue = fromValue;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n      this._startTime = Date.now();\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var now = Date.now();\n      var value = this._fromValue + this._velocity / (1 - this._deceleration) * (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n      this._onUpdate(value);\n\n      if (Math.abs(this._lastValue - value) < 0.1) {\n        this.__debouncedOnEnd({\n          finished: true\n        });\n\n        return;\n      }\n\n      this._lastValue = value;\n\n      if (this.__active) {\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      window.cancelAnimationFrame(this._animationFrame);\n\n      this.__debouncedOnEnd({\n        finished: false\n      });\n    }\n  }]);\n\n  return DecayAnimation;\n}(Animation);\n\nfunction withDefault(value, defaultValue) {\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n\n  return value;\n}\n\nvar SpringAnimation = function (_Animation3) {\n  _inherits(SpringAnimation, _Animation3);\n\n  function SpringAnimation(config) {\n    _classCallCheck(this, SpringAnimation);\n\n    var _this5 = _possibleConstructorReturn(this, Object.getPrototypeOf(SpringAnimation).call(this));\n\n    _this5._overshootClamping = withDefault(config.overshootClamping, false);\n    _this5._restDisplacementThreshold = withDefault(config.restDisplacementThreshold, 0.001);\n    _this5._restSpeedThreshold = withDefault(config.restSpeedThreshold, 0.001);\n    _this5._initialVelocity = config.velocity;\n    _this5._lastVelocity = withDefault(config.velocity, 0);\n    _this5._toValue = config.toValue;\n    _this5.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    var springConfig;\n\n    if (config.bounciness !== undefined || config.speed !== undefined) {\n      (0, _invariant2.default)(config.tension === undefined && config.friction === undefined, 'You can only define bounciness/speed or tension/friction but not both');\n      springConfig = _SpringConfig2.default.fromBouncinessAndSpeed(withDefault(config.bounciness, 8), withDefault(config.speed, 12));\n    } else {\n      springConfig = _SpringConfig2.default.fromOrigamiTensionAndFriction(withDefault(config.tension, 40), withDefault(config.friction, 7));\n    }\n\n    _this5._tension = springConfig.tension;\n    _this5._friction = springConfig.friction;\n    return _this5;\n  }\n\n  _createClass(SpringAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd, previousAnimation) {\n      this.__active = true;\n      this._startPosition = fromValue;\n      this._lastPosition = this._startPosition;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n      this._lastTime = Date.now();\n\n      if (previousAnimation instanceof SpringAnimation) {\n        var internalState = previousAnimation.getInternalState();\n        this._lastPosition = internalState.lastPosition;\n        this._lastVelocity = internalState.lastVelocity;\n        this._lastTime = internalState.lastTime;\n      }\n\n      if (this._initialVelocity !== undefined && this._initialVelocity !== null) {\n        this._lastVelocity = this._initialVelocity;\n      }\n\n      this.onUpdate();\n    }\n  }, {\n    key: 'getInternalState',\n    value: function getInternalState() {\n      return {\n        lastPosition: this._lastPosition,\n        lastVelocity: this._lastVelocity,\n        lastTime: this._lastTime\n      };\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var position = this._lastPosition;\n      var velocity = this._lastVelocity;\n      var tempPosition = this._lastPosition;\n      var tempVelocity = this._lastVelocity;\n      var MAX_STEPS = 64;\n      var now = Date.now();\n\n      if (now > this._lastTime + MAX_STEPS) {\n        now = this._lastTime + MAX_STEPS;\n      }\n\n      var TIMESTEP_MSEC = 1;\n      var numSteps = Math.floor((now - this._lastTime) / TIMESTEP_MSEC);\n\n      for (var i = 0; i < numSteps; ++i) {\n        var step = TIMESTEP_MSEC / 1000;\n        var aVelocity = velocity;\n        var aAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        var tempPosition = position + aVelocity * step / 2;\n        var tempVelocity = velocity + aAcceleration * step / 2;\n        var bVelocity = tempVelocity;\n        var bAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + bVelocity * step / 2;\n        tempVelocity = velocity + bAcceleration * step / 2;\n        var cVelocity = tempVelocity;\n        var cAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + cVelocity * step / 2;\n        tempVelocity = velocity + cAcceleration * step / 2;\n        var dVelocity = tempVelocity;\n        var dAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + cVelocity * step / 2;\n        tempVelocity = velocity + cAcceleration * step / 2;\n        var dxdt = (aVelocity + 2 * (bVelocity + cVelocity) + dVelocity) / 6;\n        var dvdt = (aAcceleration + 2 * (bAcceleration + cAcceleration) + dAcceleration) / 6;\n        position += dxdt * step;\n        velocity += dvdt * step;\n      }\n\n      this._lastTime = now;\n      this._lastPosition = position;\n      this._lastVelocity = velocity;\n\n      this._onUpdate(position);\n\n      if (!this.__active) {\n        return;\n      }\n\n      var isOvershooting = false;\n\n      if (this._overshootClamping && this._tension !== 0) {\n        if (this._startPosition < this._toValue) {\n          isOvershooting = position > this._toValue;\n        } else {\n          isOvershooting = position < this._toValue;\n        }\n      }\n\n      var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;\n\n      var isDisplacement = true;\n\n      if (this._tension !== 0) {\n        isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;\n      }\n\n      if (isOvershooting || isVelocity && isDisplacement) {\n        if (this._tension !== 0) {\n          this._onUpdate(this._toValue);\n        }\n\n        this.__debouncedOnEnd({\n          finished: true\n        });\n\n        return;\n      }\n\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      window.cancelAnimationFrame(this._animationFrame);\n\n      this.__debouncedOnEnd({\n        finished: false\n      });\n    }\n  }]);\n\n  return SpringAnimation;\n}(Animation);\n\nvar _uniqueId = 1;\n\nvar AnimatedValue = function (_AnimatedWithChildren) {\n  _inherits(AnimatedValue, _AnimatedWithChildren);\n\n  function AnimatedValue(value) {\n    _classCallCheck(this, AnimatedValue);\n\n    var _this6 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedValue).call(this));\n\n    _this6._value = value;\n    _this6._offset = 0;\n    _this6._animation = null;\n    _this6._listeners = {};\n    return _this6;\n  }\n\n  _createClass(AnimatedValue, [{\n    key: '__detach',\n    value: function __detach() {\n      this.stopAnimation();\n    }\n  }, {\n    key: '__getValue',\n    value: function __getValue() {\n      return this._value + this._offset;\n    }\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      if (this._animation) {\n        this._animation.stop();\n\n        this._animation = null;\n      }\n\n      this._updateValue(value);\n    }\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      this._offset = offset;\n    }\n  }, {\n    key: 'flattenOffset',\n    value: function flattenOffset() {\n      this._value += this._offset;\n      this._offset = 0;\n    }\n  }, {\n    key: 'addListener',\n    value: function addListener(callback) {\n      var id = String(_uniqueId++);\n      this._listeners[id] = callback;\n      return id;\n    }\n  }, {\n    key: 'removeListener',\n    value: function removeListener(id) {\n      delete this._listeners[id];\n    }\n  }, {\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      this._listeners = {};\n    }\n  }, {\n    key: 'stopAnimation',\n    value: function stopAnimation(callback) {\n      this.stopTracking();\n      this._animation && this._animation.stop();\n      this._animation = null;\n      callback && callback(this.__getValue());\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: 'animate',\n    value: function animate(animation, callback) {\n      var _this7 = this;\n\n      var handle = null;\n\n      if (animation.__isInteraction) {\n        handle = _InteractionManager2.default.createInteractionHandle();\n      }\n\n      var previousAnimation = this._animation;\n      this._animation && this._animation.stop();\n      this._animation = animation;\n      animation.start(this._value, function (value) {\n        _this7._updateValue(value);\n      }, function (result) {\n        _this7._animation = null;\n\n        if (handle !== null) {\n          _InteractionManager2.default.clearInteractionHandle(handle);\n        }\n\n        callback && callback(result);\n      }, previousAnimation);\n    }\n  }, {\n    key: 'stopTracking',\n    value: function stopTracking() {\n      this._tracking && this._tracking.__detach();\n      this._tracking = null;\n    }\n  }, {\n    key: 'track',\n    value: function track(tracking) {\n      this.stopTracking();\n      this._tracking = tracking;\n    }\n  }, {\n    key: '_updateValue',\n    value: function _updateValue(value) {\n      this._value = value;\n\n      _flush(this);\n\n      for (var key in this._listeners) {\n        this._listeners[key]({\n          value: this.__getValue()\n        });\n      }\n    }\n  }]);\n\n  return AnimatedValue;\n}(AnimatedWithChildren);\n\nvar AnimatedValueXY = function (_AnimatedWithChildren2) {\n  _inherits(AnimatedValueXY, _AnimatedWithChildren2);\n\n  function AnimatedValueXY(valueIn) {\n    _classCallCheck(this, AnimatedValueXY);\n\n    var _this8 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedValueXY).call(this));\n\n    var value = valueIn || {\n      x: 0,\n      y: 0\n    };\n\n    if (typeof value.x === 'number' && typeof value.y === 'number') {\n      _this8.x = new AnimatedValue(value.x);\n      _this8.y = new AnimatedValue(value.y);\n    } else {\n      (0, _invariant2.default)(value.x instanceof AnimatedValue && value.y instanceof AnimatedValue, 'AnimatedValueXY must be initalized with an object of numbers or ' + 'AnimatedValues.');\n      _this8.x = value.x;\n      _this8.y = value.y;\n    }\n\n    _this8._listeners = {};\n    return _this8;\n  }\n\n  _createClass(AnimatedValueXY, [{\n    key: 'setValue',\n    value: function setValue(value) {\n      this.x.setValue(value.x);\n      this.y.setValue(value.y);\n    }\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      this.x.setOffset(offset.x);\n      this.y.setOffset(offset.y);\n    }\n  }, {\n    key: 'flattenOffset',\n    value: function flattenOffset() {\n      this.x.flattenOffset();\n      this.y.flattenOffset();\n    }\n  }, {\n    key: '__getValue',\n    value: function __getValue() {\n      return {\n        x: this.x.__getValue(),\n        y: this.y.__getValue()\n      };\n    }\n  }, {\n    key: 'stopAnimation',\n    value: function stopAnimation(callback) {\n      this.x.stopAnimation();\n      this.y.stopAnimation();\n      callback && callback(this.__getValue());\n    }\n  }, {\n    key: 'addListener',\n    value: function addListener(callback) {\n      var _this9 = this;\n\n      var id = String(_uniqueId++);\n\n      var jointCallback = function jointCallback(_ref) {\n        var number = _ref.value;\n        callback(_this9.__getValue());\n      };\n\n      this._listeners[id] = {\n        x: this.x.addListener(jointCallback),\n        y: this.y.addListener(jointCallback)\n      };\n      return id;\n    }\n  }, {\n    key: 'removeListener',\n    value: function removeListener(id) {\n      this.x.removeListener(this._listeners[id].x);\n      this.y.removeListener(this._listeners[id].y);\n      delete this._listeners[id];\n    }\n  }, {\n    key: 'getLayout',\n    value: function getLayout() {\n      return {\n        left: this.x,\n        top: this.y\n      };\n    }\n  }, {\n    key: 'getTranslateTransform',\n    value: function getTranslateTransform() {\n      return [{\n        translateX: this.x\n      }, {\n        translateY: this.y\n      }];\n    }\n  }]);\n\n  return AnimatedValueXY;\n}(AnimatedWithChildren);\n\nvar AnimatedInterpolation = function (_AnimatedWithChildren3) {\n  _inherits(AnimatedInterpolation, _AnimatedWithChildren3);\n\n  function AnimatedInterpolation(parent, interpolation) {\n    _classCallCheck(this, AnimatedInterpolation);\n\n    var _this10 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedInterpolation).call(this));\n\n    _this10._parent = parent;\n    _this10._interpolation = interpolation;\n    return _this10;\n  }\n\n  _createClass(AnimatedInterpolation, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var parentValue = this._parent.__getValue();\n\n      (0, _invariant2.default)(typeof parentValue === 'number', 'Cannot interpolate an input which is not a number.');\n      return this._interpolation(parentValue);\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._parent.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._parent.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedInterpolation;\n}(AnimatedWithChildren);\n\nvar AnimatedAddition = function (_AnimatedWithChildren4) {\n  _inherits(AnimatedAddition, _AnimatedWithChildren4);\n\n  function AnimatedAddition(a, b) {\n    _classCallCheck(this, AnimatedAddition);\n\n    var _this11 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedAddition).call(this));\n\n    _this11._a = a;\n    _this11._b = b;\n    return _this11;\n  }\n\n  _createClass(AnimatedAddition, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._a.__getValue() + this._b.__getValue();\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._a.__addChild(this);\n\n      this._b.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._a.__removeChild(this);\n\n      this._b.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedAddition;\n}(AnimatedWithChildren);\n\nvar AnimatedMultiplication = function (_AnimatedWithChildren5) {\n  _inherits(AnimatedMultiplication, _AnimatedWithChildren5);\n\n  function AnimatedMultiplication(a, b) {\n    _classCallCheck(this, AnimatedMultiplication);\n\n    var _this12 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedMultiplication).call(this));\n\n    _this12._a = a;\n    _this12._b = b;\n    return _this12;\n  }\n\n  _createClass(AnimatedMultiplication, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._a.__getValue() * this._b.__getValue();\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._a.__addChild(this);\n\n      this._b.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._a.__removeChild(this);\n\n      this._b.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedMultiplication;\n}(AnimatedWithChildren);\n\nvar AnimatedTransform = function (_AnimatedWithChildren6) {\n  _inherits(AnimatedTransform, _AnimatedWithChildren6);\n\n  function AnimatedTransform(transforms) {\n    _classCallCheck(this, AnimatedTransform);\n\n    var _this13 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedTransform).call(this));\n\n    _this13._transforms = transforms;\n    return _this13;\n  }\n\n  _createClass(AnimatedTransform, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._transforms.map(function (transform) {\n        var result = {};\n\n        for (var key in transform) {\n          var value = transform[key];\n\n          if (value instanceof Animated) {\n            result[key] = value.__getValue();\n          } else {\n            result[key] = value;\n          }\n        }\n\n        return result;\n      });\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      return this._transforms.map(function (transform) {\n        var result = {};\n\n        for (var key in transform) {\n          var value = transform[key];\n\n          if (value instanceof Animated) {\n            result[key] = value.__getAnimatedValue();\n          } else {\n            result[key] = value;\n          }\n        }\n\n        return result;\n      });\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      var _this14 = this;\n\n      this._transforms.forEach(function (transform) {\n        for (var key in transform) {\n          var value = transform[key];\n\n          if (value instanceof Animated) {\n            value.__addChild(_this14);\n          }\n        }\n      });\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      var _this15 = this;\n\n      this._transforms.forEach(function (transform) {\n        for (var key in transform) {\n          var value = transform[key];\n\n          if (value instanceof Animated) {\n            value.__removeChild(_this15);\n          }\n        }\n      });\n    }\n  }]);\n\n  return AnimatedTransform;\n}(AnimatedWithChildren);\n\nvar AnimatedStyle = function (_AnimatedWithChildren7) {\n  _inherits(AnimatedStyle, _AnimatedWithChildren7);\n\n  function AnimatedStyle(style) {\n    _classCallCheck(this, AnimatedStyle);\n\n    var _this16 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedStyle).call(this));\n\n    style = (0, _flattenStyle2.default)(style) || {};\n\n    if (style.transform) {\n      style = _extends({}, style, {\n        transform: new AnimatedTransform(style.transform)\n      });\n    }\n\n    _this16._style = style;\n    return _this16;\n  }\n\n  _createClass(AnimatedStyle, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var style = {};\n\n      for (var key in this._style) {\n        var value = this._style[key];\n\n        if (value instanceof Animated) {\n          style[key] = value.__getValue();\n        } else {\n          style[key] = value;\n        }\n      }\n\n      return style;\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      var style = {};\n\n      for (var key in this._style) {\n        var value = this._style[key];\n\n        if (value instanceof Animated) {\n          style[key] = value.__getAnimatedValue();\n        }\n      }\n\n      return style;\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      for (var key in this._style) {\n        var value = this._style[key];\n\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      for (var key in this._style) {\n        var value = this._style[key];\n\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    }\n  }]);\n\n  return AnimatedStyle;\n}(AnimatedWithChildren);\n\nvar AnimatedProps = function (_Animated2) {\n  _inherits(AnimatedProps, _Animated2);\n\n  function AnimatedProps(props, callback) {\n    _classCallCheck(this, AnimatedProps);\n\n    var _this17 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedProps).call(this));\n\n    if (props.style) {\n      props = _extends({}, props, {\n        style: new AnimatedStyle(props.style)\n      });\n    }\n\n    _this17._props = props;\n    _this17._callback = callback;\n\n    _this17.__attach();\n\n    return _this17;\n  }\n\n  _createClass(AnimatedProps, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var props = {};\n\n      for (var key in this._props) {\n        var value = this._props[key];\n\n        if (value instanceof Animated) {\n          props[key] = value.__getValue();\n        } else {\n          props[key] = value;\n        }\n      }\n\n      return props;\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      var props = {};\n\n      for (var key in this._props) {\n        var value = this._props[key];\n\n        if (value instanceof Animated) {\n          props[key] = value.__getAnimatedValue();\n        }\n      }\n\n      return props;\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      for (var key in this._props) {\n        var value = this._props[key];\n\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      for (var key in this._props) {\n        var value = this._props[key];\n\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this._callback();\n    }\n  }]);\n\n  return AnimatedProps;\n}(Animated);\n\nfunction createAnimatedComponent(Component) {\n  var refName = 'node';\n\n  var AnimatedComponent = function (_React$Component) {\n    _inherits(AnimatedComponent, _React$Component);\n\n    function AnimatedComponent() {\n      _classCallCheck(this, AnimatedComponent);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedComponent).apply(this, arguments));\n    }\n\n    _createClass(AnimatedComponent, [{\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this._propsAnimated && this._propsAnimated.__detach();\n      }\n    }, {\n      key: 'setNativeProps',\n      value: function setNativeProps(props) {\n        this.refs[refName].setNativeProps(props);\n      }\n    }, {\n      key: 'componentWillMount',\n      value: function componentWillMount() {\n        this.attachProps(this.props);\n      }\n    }, {\n      key: 'attachProps',\n      value: function attachProps(nextProps) {\n        var _this19 = this;\n\n        var oldPropsAnimated = this._propsAnimated;\n\n        var callback = function callback() {\n          if (_this19.refs[refName].setNativeProps) {\n            var value = _this19._propsAnimated.__getAnimatedValue();\n\n            _this19.refs[refName].setNativeProps(value);\n          } else {\n            _this19.forceUpdate();\n          }\n        };\n\n        this._propsAnimated = new AnimatedProps(nextProps, callback);\n        oldPropsAnimated && oldPropsAnimated.__detach();\n      }\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        this.attachProps(nextProps);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(Component, _extends({}, this._propsAnimated.__getValue(), {\n          ref: refName\n        }));\n      }\n    }]);\n\n    return AnimatedComponent;\n  }(_react2.default.Component);\n\n  AnimatedComponent.propTypes = {\n    style: function style(props, propName, componentName) {\n      if (!Component.propTypes) {\n        return;\n      }\n\n      for (var key in _ViewStylePropTypes2.default) {\n        if (!Component.propTypes[key] && props[key] !== undefined) {\n          console.error('You are setting the style `{ ' + key + ': ... }` as a prop. You ' + 'should nest it in a style object. ' + 'E.g. `{ style: { ' + key + ': ... } }`');\n        }\n      }\n    }\n  };\n  return AnimatedComponent;\n}\n\nvar AnimatedTracking = function (_Animated3) {\n  _inherits(AnimatedTracking, _Animated3);\n\n  function AnimatedTracking(value, parent, animationClass, animationConfig, callback) {\n    _classCallCheck(this, AnimatedTracking);\n\n    var _this20 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedTracking).call(this));\n\n    _this20._value = value;\n    _this20._parent = parent;\n    _this20._animationClass = animationClass;\n    _this20._animationConfig = animationConfig;\n    _this20._callback = callback;\n\n    _this20.__attach();\n\n    return _this20;\n  }\n\n  _createClass(AnimatedTracking, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._parent.__getValue();\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._parent.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._parent.__removeChild(this);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this._value.animate(new this._animationClass(_extends({}, this._animationConfig, {\n        toValue: this._animationConfig.toValue.__getValue()\n      })), this._callback);\n    }\n  }]);\n\n  return AnimatedTracking;\n}(Animated);\n\nvar add = function add(a, b) {\n  return new AnimatedAddition(a, b);\n};\n\nvar multiply = function multiply(a, b) {\n  return new AnimatedMultiplication(a, b);\n};\n\nvar maybeVectorAnim = function maybeVectorAnim(value, config, anim) {\n  if (value instanceof AnimatedValueXY) {\n    var configX = _extends({}, config);\n\n    var configY = _extends({}, config);\n\n    for (var key in config) {\n      var _config$key = config[key];\n      var x = _config$key.x;\n      var y = _config$key.y;\n\n      if (x !== undefined && y !== undefined) {\n        configX[key] = x;\n        configY[key] = y;\n      }\n    }\n\n    var aX = anim(value.x, configX);\n    var aY = anim(value.y, configY);\n    return parallel([aX, aY], {\n      stopTogether: false\n    });\n  }\n\n  return null;\n};\n\nvar spring = function spring(value, config) {\n  return maybeVectorAnim(value, config, spring) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n\n      if (config.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(singleValue, config.toValue, SpringAnimation, singleConfig, callback));\n      } else {\n        singleValue.animate(new SpringAnimation(singleConfig), callback);\n      }\n    },\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar timing = function timing(value, config) {\n  return maybeVectorAnim(value, config, timing) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n\n      if (config.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(singleValue, config.toValue, TimingAnimation, singleConfig, callback));\n      } else {\n        singleValue.animate(new TimingAnimation(singleConfig), callback);\n      }\n    },\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar decay = function decay(value, config) {\n  return maybeVectorAnim(value, config, decay) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n      singleValue.animate(new DecayAnimation(singleConfig), callback);\n    },\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar sequence = function sequence(animations) {\n  var current = 0;\n  return {\n    start: function start(callback) {\n      var onComplete = function onComplete(result) {\n        if (!result.finished) {\n          callback && callback(result);\n          return;\n        }\n\n        current++;\n\n        if (current === animations.length) {\n          callback && callback(result);\n          return;\n        }\n\n        animations[current].start(onComplete);\n      };\n\n      if (animations.length === 0) {\n        callback && callback({\n          finished: true\n        });\n      } else {\n        animations[current].start(onComplete);\n      }\n    },\n    stop: function stop() {\n      if (current < animations.length) {\n        animations[current].stop();\n      }\n    }\n  };\n};\n\nvar parallel = function parallel(animations, config) {\n  var doneCount = 0;\n  var hasEnded = {};\n  var stopTogether = !(config && config.stopTogether === false);\n  var result = {\n    start: function start(callback) {\n      if (doneCount === animations.length) {\n        callback && callback({\n          finished: true\n        });\n        return;\n      }\n\n      animations.forEach(function (animation, idx) {\n        var cb = function cb(endResult) {\n          hasEnded[idx] = true;\n          doneCount++;\n\n          if (doneCount === animations.length) {\n            doneCount = 0;\n            callback && callback(endResult);\n            return;\n          }\n\n          if (!endResult.finished && stopTogether) {\n            result.stop();\n          }\n        };\n\n        if (!animation) {\n          cb({\n            finished: true\n          });\n        } else {\n          animation.start(cb);\n        }\n      });\n    },\n    stop: function stop() {\n      animations.forEach(function (animation, idx) {\n        !hasEnded[idx] && animation.stop();\n        hasEnded[idx] = true;\n      });\n    }\n  };\n  return result;\n};\n\nvar delay = function delay(time) {\n  return timing(new AnimatedValue(0), {\n    toValue: 0,\n    delay: time,\n    duration: 0\n  });\n};\n\nvar stagger = function stagger(time, animations) {\n  return parallel(animations.map(function (animation, i) {\n    return sequence([delay(time * i), animation]);\n  }));\n};\n\nvar event = function event(argMapping, config) {\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var traverse = function traverse(recMapping, recEvt, key) {\n      if (typeof recEvt === 'number') {\n        (0, _invariant2.default)(recMapping instanceof AnimatedValue, 'Bad mapping of type ' + (typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) + ' for key ' + key + ', event value must map to AnimatedValue');\n        recMapping.setValue(recEvt);\n        return;\n      }\n\n      (0, _invariant2.default)((typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) === 'object', 'Bad mapping of type ' + (typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) + ' for key ' + key);\n      (0, _invariant2.default)((typeof recEvt === 'undefined' ? 'undefined' : _typeof(recEvt)) === 'object', 'Bad event of type ' + (typeof recEvt === 'undefined' ? 'undefined' : _typeof(recEvt)) + ' for key ' + key);\n\n      for (var key in recMapping) {\n        traverse(recMapping[key], recEvt[key], key);\n      }\n    };\n\n    argMapping.forEach(function (mapping, idx) {\n      traverse(mapping, args[idx], 'arg' + idx);\n    });\n\n    if (config && config.listener) {\n      config.listener.apply(null, args);\n    }\n  };\n};\n\nmodule.exports = {\n  Value: AnimatedValue,\n  ValueXY: AnimatedValueXY,\n  decay: decay,\n  timing: timing,\n  spring: spring,\n  add: add,\n  multiply: multiply,\n  delay: delay,\n  sequence: sequence,\n  parallel: parallel,\n  stagger: stagger,\n  event: event,\n  createAnimatedComponent: createAnimatedComponent,\n  __PropsOnlyForTests: AnimatedProps\n};","map":{"version":3,"sources":["/home/phil/Workspace/aws-react-native/node_modules/react-native-web/dist/apis/Animated/AnimatedImplementation.js"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","Constructor","protoProps","staticProps","_Easing","require","_Easing2","_interopRequireDefault","_flattenStyle","_flattenStyle2","_InteractionManager","_InteractionManager2","_Interpolation","_Interpolation2","_invariant","_invariant2","_react","_react2","_Set","_Set2","_SpringConfig","_SpringConfig2","_ViewStylePropTypes","_ViewStylePropTypes2","obj","__esModule","default","_typeof","Symbol","constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","value","setPrototypeOf","__proto__","_classCallCheck","instance","Animated","__attach","__detach","__getValue","__getAnimatedValue","__addChild","child","__removeChild","__getChildren","Animation","start","fromValue","onUpdate","onEnd","previousAnimation","stop","__debouncedOnEnd","result","__onEnd","AnimatedWithChildren","_Animated","_this","getPrototypeOf","_children","push","index","indexOf","console","warn","splice","_flush","rootNode","animatedStyles","findAnimatedStyles","node","update","add","forEach","animatedStyle","easeInOut","inOut","ease","TimingAnimation","_Animation","config","_this2","_toValue","toValue","_easing","easing","undefined","_duration","duration","_delay","delay","__isInteraction","isInteraction","_this3","__active","_fromValue","_onUpdate","finished","_startTime","Date","now","_animationFrame","requestAnimationFrame","bind","_timeout","setTimeout","clearTimeout","window","cancelAnimationFrame","DecayAnimation","_Animation2","_this4","_deceleration","deceleration","_velocity","velocity","_lastValue","Math","exp","abs","withDefault","defaultValue","SpringAnimation","_Animation3","_this5","_overshootClamping","overshootClamping","_restDisplacementThreshold","restDisplacementThreshold","_restSpeedThreshold","restSpeedThreshold","_initialVelocity","_lastVelocity","springConfig","bounciness","speed","tension","friction","fromBouncinessAndSpeed","fromOrigamiTensionAndFriction","_tension","_friction","_startPosition","_lastPosition","_lastTime","internalState","getInternalState","lastPosition","lastVelocity","lastTime","position","tempPosition","tempVelocity","MAX_STEPS","TIMESTEP_MSEC","numSteps","floor","step","aVelocity","aAcceleration","bVelocity","bAcceleration","cVelocity","cAcceleration","dVelocity","dAcceleration","dxdt","dvdt","isOvershooting","isVelocity","isDisplacement","_uniqueId","AnimatedValue","_AnimatedWithChildren","_this6","_value","_offset","_animation","_listeners","stopAnimation","setValue","_updateValue","setOffset","offset","flattenOffset","addListener","callback","id","String","removeListener","removeAllListeners","stopTracking","interpolate","AnimatedInterpolation","animate","animation","_this7","handle","createInteractionHandle","clearInteractionHandle","_tracking","track","tracking","AnimatedValueXY","_AnimatedWithChildren2","valueIn","_this8","x","y","_this9","jointCallback","_ref","number","getLayout","left","top","getTranslateTransform","translateX","translateY","_AnimatedWithChildren3","parent","interpolation","_this10","_parent","_interpolation","parentValue","AnimatedAddition","_AnimatedWithChildren4","a","b","_this11","_a","_b","AnimatedMultiplication","_AnimatedWithChildren5","_this12","AnimatedTransform","_AnimatedWithChildren6","transforms","_this13","_transforms","map","transform","_this14","_this15","AnimatedStyle","_AnimatedWithChildren7","style","_this16","_style","AnimatedProps","_Animated2","_this17","_props","_callback","createAnimatedComponent","Component","refName","AnimatedComponent","_React$Component","apply","componentWillUnmount","_propsAnimated","setNativeProps","refs","componentWillMount","attachProps","nextProps","_this19","oldPropsAnimated","forceUpdate","componentWillReceiveProps","render","createElement","ref","propTypes","propName","componentName","error","AnimatedTracking","_Animated3","animationClass","animationConfig","_this20","_animationClass","_animationConfig","multiply","maybeVectorAnim","anim","configX","configY","_config$key","aX","aY","parallel","stopTogether","spring","singleValue","singleConfig","timing","decay","sequence","animations","current","onComplete","doneCount","hasEnded","idx","cb","endResult","time","stagger","event","argMapping","_len","args","Array","_key","traverse","recMapping","recEvt","mapping","listener","module","exports","Value","ValueXY","__PropsOnlyForTests"],"mappings":"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","sourcesContent":["/* eslint-disable */\n/**\n * Copyright (c) 2015-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule AnimatedImplementation\n * \n */\n'use strict';\n\n/* @edit start */\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _Easing = require('../Easing');\n\nvar _Easing2 = _interopRequireDefault(_Easing);\n\nvar _flattenStyle = require('../StyleSheet/flattenStyle');\n\nvar _flattenStyle2 = _interopRequireDefault(_flattenStyle);\n\nvar _InteractionManager = require('../InteractionManager');\n\nvar _InteractionManager2 = _interopRequireDefault(_InteractionManager);\n\nvar _Interpolation = require('./Interpolation');\n\nvar _Interpolation2 = _interopRequireDefault(_Interpolation);\n\nvar _invariant = require('fbjs/lib/invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _Set = require('./polyfills/Set');\n\nvar _Set2 = _interopRequireDefault(_Set);\n\nvar _SpringConfig = require('./SpringConfig');\n\nvar _SpringConfig2 = _interopRequireDefault(_SpringConfig);\n\nvar _ViewStylePropTypes = require('../../components/View/ViewStylePropTypes');\n\nvar _ViewStylePropTypes2 = _interopRequireDefault(_ViewStylePropTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// Note(vjeux): this would be better as an interface but flow doesn't\n// support them yet\n\n/* @edit end */\n\nvar Animated = (function () {\n  function Animated() {\n    _classCallCheck(this, Animated);\n  }\n\n  _createClass(Animated, [{\n    key: '__attach',\n    value: function __attach() {}\n  }, {\n    key: '__detach',\n    value: function __detach() {}\n  }, {\n    key: '__getValue',\n    value: function __getValue() {}\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      return this.__getValue();\n    }\n  }, {\n    key: '__addChild',\n    value: function __addChild(child) {}\n  }, {\n    key: '__removeChild',\n    value: function __removeChild(child) {}\n  }, {\n    key: '__getChildren',\n    value: function __getChildren() {\n      return [];\n    }\n  }]);\n\n  return Animated;\n})();\n\n// Important note: start() and stop() will only be called at most once.\n// Once an animation has been stopped or finished its course, it will\n// not be reused.\n\nvar Animation = (function () {\n  function Animation() {\n    _classCallCheck(this, Animation);\n  }\n\n  _createClass(Animation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd, previousAnimation) {}\n  }, {\n    key: 'stop',\n    value: function stop() {}\n    // Helper function for subclasses to make sure onEnd is only called once.\n\n  }, {\n    key: '__debouncedOnEnd',\n    value: function __debouncedOnEnd(result) {\n      var onEnd = this.__onEnd;\n      this.__onEnd = null;\n      onEnd && onEnd(result);\n    }\n  }]);\n\n  return Animation;\n})();\n\nvar AnimatedWithChildren = (function (_Animated) {\n  _inherits(AnimatedWithChildren, _Animated);\n\n  function AnimatedWithChildren() {\n    _classCallCheck(this, AnimatedWithChildren);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedWithChildren).call(this));\n\n    _this._children = [];\n    return _this;\n  }\n\n  _createClass(AnimatedWithChildren, [{\n    key: '__addChild',\n    value: function __addChild(child) {\n      if (this._children.length === 0) {\n        this.__attach();\n      }\n      this._children.push(child);\n    }\n  }, {\n    key: '__removeChild',\n    value: function __removeChild(child) {\n      var index = this._children.indexOf(child);\n      if (index === -1) {\n        console.warn('Trying to remove a child that doesn\\'t exist');\n        return;\n      }\n      this._children.splice(index, 1);\n      if (this._children.length === 0) {\n        this.__detach();\n      }\n    }\n  }, {\n    key: '__getChildren',\n    value: function __getChildren() {\n      return this._children;\n    }\n  }]);\n\n  return AnimatedWithChildren;\n})(Animated);\n\n/**\n * Animated works by building a directed acyclic graph of dependencies\n * transparently when you render your Animated components.\n *\n *               new Animated.Value(0)\n *     .interpolate()        .interpolate()    new Animated.Value(1)\n *         opacity               translateY      scale\n *          style                         transform\n *         View#234                         style\n *                                         View#123\n *\n * A) Top Down phase\n * When an Animated.Value is updated, we recursively go down through this\n * graph in order to find leaf nodes: the views that we flag as needing\n * an update.\n *\n * B) Bottom Up phase\n * When a view is flagged as needing an update, we recursively go back up\n * in order to build the new value that it needs. The reason why we need\n * this two-phases process is to deal with composite props such as\n * transform which can receive values from multiple parents.\n */\n\nfunction _flush(rootNode) {\n  var animatedStyles = new _Set2.default();\n  function findAnimatedStyles(node) {\n    if (typeof node.update === 'function') {\n      animatedStyles.add(node);\n    } else {\n      node.__getChildren().forEach(findAnimatedStyles);\n    }\n  }\n  findAnimatedStyles(rootNode);\n  animatedStyles.forEach(function (animatedStyle) {\n    return animatedStyle.update();\n  });\n}\n\nvar easeInOut = _Easing2.default.inOut(_Easing2.default.ease);\n\nvar TimingAnimation = (function (_Animation) {\n  _inherits(TimingAnimation, _Animation);\n\n  function TimingAnimation(config) {\n    _classCallCheck(this, TimingAnimation);\n\n    var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(TimingAnimation).call(this));\n\n    _this2._toValue = config.toValue;\n    _this2._easing = config.easing !== undefined ? config.easing : easeInOut;\n    _this2._duration = config.duration !== undefined ? config.duration : 500;\n    _this2._delay = config.delay !== undefined ? config.delay : 0;\n    _this2.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    return _this2;\n  }\n\n  _createClass(TimingAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd) {\n      var _this3 = this;\n\n      this.__active = true;\n      this._fromValue = fromValue;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n\n      var start = function start() {\n        if (_this3._duration === 0) {\n          _this3._onUpdate(_this3._toValue);\n          _this3.__debouncedOnEnd({ finished: true });\n        } else {\n          _this3._startTime = Date.now();\n          _this3._animationFrame = requestAnimationFrame(_this3.onUpdate.bind(_this3));\n        }\n      };\n      if (this._delay) {\n        this._timeout = setTimeout(start, this._delay);\n      } else {\n        start();\n      }\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var now = Date.now();\n      if (now >= this._startTime + this._duration) {\n        if (this._duration === 0) {\n          this._onUpdate(this._toValue);\n        } else {\n          this._onUpdate(this._fromValue + this._easing(1) * (this._toValue - this._fromValue));\n        }\n        this.__debouncedOnEnd({ finished: true });\n        return;\n      }\n\n      this._onUpdate(this._fromValue + this._easing((now - this._startTime) / this._duration) * (this._toValue - this._fromValue));\n      if (this.__active) {\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      clearTimeout(this._timeout);\n      window.cancelAnimationFrame(this._animationFrame);\n      this.__debouncedOnEnd({ finished: false });\n    }\n  }]);\n\n  return TimingAnimation;\n})(Animation);\n\nvar DecayAnimation = (function (_Animation2) {\n  _inherits(DecayAnimation, _Animation2);\n\n  function DecayAnimation(config) {\n    _classCallCheck(this, DecayAnimation);\n\n    var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(DecayAnimation).call(this));\n\n    _this4._deceleration = config.deceleration !== undefined ? config.deceleration : 0.998;\n    _this4._velocity = config.velocity;\n    _this4.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n    return _this4;\n  }\n\n  _createClass(DecayAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd) {\n      this.__active = true;\n      this._lastValue = fromValue;\n      this._fromValue = fromValue;\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n      this._startTime = Date.now();\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var now = Date.now();\n\n      var value = this._fromValue + this._velocity / (1 - this._deceleration) * (1 - Math.exp(-(1 - this._deceleration) * (now - this._startTime)));\n\n      this._onUpdate(value);\n\n      if (Math.abs(this._lastValue - value) < 0.1) {\n        this.__debouncedOnEnd({ finished: true });\n        return;\n      }\n\n      this._lastValue = value;\n      if (this.__active) {\n        this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      window.cancelAnimationFrame(this._animationFrame);\n      this.__debouncedOnEnd({ finished: false });\n    }\n  }]);\n\n  return DecayAnimation;\n})(Animation);\n\nfunction withDefault(value, defaultValue) {\n  if (value === undefined || value === null) {\n    return defaultValue;\n  }\n  return value;\n}\n\nvar SpringAnimation = (function (_Animation3) {\n  _inherits(SpringAnimation, _Animation3);\n\n  function SpringAnimation(config) {\n    _classCallCheck(this, SpringAnimation);\n\n    var _this5 = _possibleConstructorReturn(this, Object.getPrototypeOf(SpringAnimation).call(this));\n\n    _this5._overshootClamping = withDefault(config.overshootClamping, false);\n    _this5._restDisplacementThreshold = withDefault(config.restDisplacementThreshold, 0.001);\n    _this5._restSpeedThreshold = withDefault(config.restSpeedThreshold, 0.001);\n    _this5._initialVelocity = config.velocity;\n    _this5._lastVelocity = withDefault(config.velocity, 0);\n    _this5._toValue = config.toValue;\n    _this5.__isInteraction = config.isInteraction !== undefined ? config.isInteraction : true;\n\n    var springConfig;\n    if (config.bounciness !== undefined || config.speed !== undefined) {\n      (0, _invariant2.default)(config.tension === undefined && config.friction === undefined, 'You can only define bounciness/speed or tension/friction but not both');\n      springConfig = _SpringConfig2.default.fromBouncinessAndSpeed(withDefault(config.bounciness, 8), withDefault(config.speed, 12));\n    } else {\n      springConfig = _SpringConfig2.default.fromOrigamiTensionAndFriction(withDefault(config.tension, 40), withDefault(config.friction, 7));\n    }\n    _this5._tension = springConfig.tension;\n    _this5._friction = springConfig.friction;\n    return _this5;\n  }\n\n  _createClass(SpringAnimation, [{\n    key: 'start',\n    value: function start(fromValue, onUpdate, onEnd, previousAnimation) {\n      this.__active = true;\n      this._startPosition = fromValue;\n      this._lastPosition = this._startPosition;\n\n      this._onUpdate = onUpdate;\n      this.__onEnd = onEnd;\n      this._lastTime = Date.now();\n\n      if (previousAnimation instanceof SpringAnimation) {\n        var internalState = previousAnimation.getInternalState();\n        this._lastPosition = internalState.lastPosition;\n        this._lastVelocity = internalState.lastVelocity;\n        this._lastTime = internalState.lastTime;\n      }\n      if (this._initialVelocity !== undefined && this._initialVelocity !== null) {\n        this._lastVelocity = this._initialVelocity;\n      }\n      this.onUpdate();\n    }\n  }, {\n    key: 'getInternalState',\n    value: function getInternalState() {\n      return {\n        lastPosition: this._lastPosition,\n        lastVelocity: this._lastVelocity,\n        lastTime: this._lastTime\n      };\n    }\n  }, {\n    key: 'onUpdate',\n    value: function onUpdate() {\n      var position = this._lastPosition;\n      var velocity = this._lastVelocity;\n\n      var tempPosition = this._lastPosition;\n      var tempVelocity = this._lastVelocity;\n\n      // If for some reason we lost a lot of frames (e.g. process large payload or\n      // stopped in the debugger), we only advance by 4 frames worth of\n      // computation and will continue on the next frame. It's better to have it\n      // running at faster speed than jumping to the end.\n      var MAX_STEPS = 64;\n      var now = Date.now();\n      if (now > this._lastTime + MAX_STEPS) {\n        now = this._lastTime + MAX_STEPS;\n      }\n\n      // We are using a fixed time step and a maximum number of iterations.\n      // The following post provides a lot of thoughts into how to build this\n      // loop: http://gafferongames.com/game-physics/fix-your-timestep/\n      var TIMESTEP_MSEC = 1;\n      var numSteps = Math.floor((now - this._lastTime) / TIMESTEP_MSEC);\n\n      for (var i = 0; i < numSteps; ++i) {\n        // Velocity is based on seconds instead of milliseconds\n        var step = TIMESTEP_MSEC / 1000;\n\n        // This is using RK4. A good blog post to understand how it works:\n        // http://gafferongames.com/game-physics/integration-basics/\n        var aVelocity = velocity;\n        var aAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        var tempPosition = position + aVelocity * step / 2;\n        var tempVelocity = velocity + aAcceleration * step / 2;\n\n        var bVelocity = tempVelocity;\n        var bAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + bVelocity * step / 2;\n        tempVelocity = velocity + bAcceleration * step / 2;\n\n        var cVelocity = tempVelocity;\n        var cAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + cVelocity * step / 2;\n        tempVelocity = velocity + cAcceleration * step / 2;\n\n        var dVelocity = tempVelocity;\n        var dAcceleration = this._tension * (this._toValue - tempPosition) - this._friction * tempVelocity;\n        tempPosition = position + cVelocity * step / 2;\n        tempVelocity = velocity + cAcceleration * step / 2;\n\n        var dxdt = (aVelocity + 2 * (bVelocity + cVelocity) + dVelocity) / 6;\n        var dvdt = (aAcceleration + 2 * (bAcceleration + cAcceleration) + dAcceleration) / 6;\n\n        position += dxdt * step;\n        velocity += dvdt * step;\n      }\n\n      this._lastTime = now;\n      this._lastPosition = position;\n      this._lastVelocity = velocity;\n\n      this._onUpdate(position);\n      if (!this.__active) {\n        // a listener might have stopped us in _onUpdate\n        return;\n      }\n\n      // Conditions for stopping the spring animation\n      var isOvershooting = false;\n      if (this._overshootClamping && this._tension !== 0) {\n        if (this._startPosition < this._toValue) {\n          isOvershooting = position > this._toValue;\n        } else {\n          isOvershooting = position < this._toValue;\n        }\n      }\n      var isVelocity = Math.abs(velocity) <= this._restSpeedThreshold;\n      var isDisplacement = true;\n      if (this._tension !== 0) {\n        isDisplacement = Math.abs(this._toValue - position) <= this._restDisplacementThreshold;\n      }\n\n      if (isOvershooting || isVelocity && isDisplacement) {\n        if (this._tension !== 0) {\n          // Ensure that we end up with a round value\n          this._onUpdate(this._toValue);\n        }\n\n        this.__debouncedOnEnd({ finished: true });\n        return;\n      }\n      this._animationFrame = requestAnimationFrame(this.onUpdate.bind(this));\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      this.__active = false;\n      window.cancelAnimationFrame(this._animationFrame);\n      this.__debouncedOnEnd({ finished: false });\n    }\n  }]);\n\n  return SpringAnimation;\n})(Animation);\n\nvar _uniqueId = 1;\n\n/**\n * Standard value for driving animations.  One `Animated.Value` can drive\n * multiple properties in a synchronized fashion, but can only be driven by one\n * mechanism at a time.  Using a new mechanism (e.g. starting a new animation,\n * or calling `setValue`) will stop any previous ones.\n */\n\nvar AnimatedValue = (function (_AnimatedWithChildren) {\n  _inherits(AnimatedValue, _AnimatedWithChildren);\n\n  function AnimatedValue(value) {\n    _classCallCheck(this, AnimatedValue);\n\n    var _this6 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedValue).call(this));\n\n    _this6._value = value;\n    _this6._offset = 0;\n    _this6._animation = null;\n    _this6._listeners = {};\n    return _this6;\n  }\n\n  _createClass(AnimatedValue, [{\n    key: '__detach',\n    value: function __detach() {\n      this.stopAnimation();\n    }\n  }, {\n    key: '__getValue',\n    value: function __getValue() {\n      return this._value + this._offset;\n    }\n\n    /**\n     * Directly set the value.  This will stop any animations running on the value\n     * and update all the bound properties.\n     */\n\n  }, {\n    key: 'setValue',\n    value: function setValue(value) {\n      if (this._animation) {\n        this._animation.stop();\n        this._animation = null;\n      }\n      this._updateValue(value);\n    }\n\n    /**\n     * Sets an offset that is applied on top of whatever value is set, whether via\n     * `setValue`, an animation, or `Animated.event`.  Useful for compensating\n     * things like the start of a pan gesture.\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      this._offset = offset;\n    }\n\n    /**\n     * Merges the offset value into the base value and resets the offset to zero.\n     * The final output of the value is unchanged.\n     */\n\n  }, {\n    key: 'flattenOffset',\n    value: function flattenOffset() {\n      this._value += this._offset;\n      this._offset = 0;\n    }\n\n    /**\n     * Adds an asynchronous listener to the value so you can observe updates from\n     * animations.  This is useful because there is no way to\n     * synchronously read the value because it might be driven natively.\n     */\n\n  }, {\n    key: 'addListener',\n    value: function addListener(callback) {\n      var id = String(_uniqueId++);\n      this._listeners[id] = callback;\n      return id;\n    }\n  }, {\n    key: 'removeListener',\n    value: function removeListener(id) {\n      delete this._listeners[id];\n    }\n  }, {\n    key: 'removeAllListeners',\n    value: function removeAllListeners() {\n      this._listeners = {};\n    }\n\n    /**\n     * Stops any running animation or tracking.  `callback` is invoked with the\n     * final value after stopping the animation, which is useful for updating\n     * state to match the animation position with layout.\n     */\n\n  }, {\n    key: 'stopAnimation',\n    value: function stopAnimation(callback) {\n      this.stopTracking();\n      this._animation && this._animation.stop();\n      this._animation = null;\n      callback && callback(this.__getValue());\n    }\n\n    /**\n     * Interpolates the value before updating the property, e.g. mapping 0-1 to\n     * 0-10.\n     */\n\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n\n    /**\n     * Typically only used internally, but could be used by a custom Animation\n     * class.\n     */\n\n  }, {\n    key: 'animate',\n    value: function animate(animation, callback) {\n      var _this7 = this;\n\n      var handle = null;\n      if (animation.__isInteraction) {\n        handle = _InteractionManager2.default.createInteractionHandle();\n      }\n      var previousAnimation = this._animation;\n      this._animation && this._animation.stop();\n      this._animation = animation;\n      animation.start(this._value, function (value) {\n        _this7._updateValue(value);\n      }, function (result) {\n        _this7._animation = null;\n        if (handle !== null) {\n          _InteractionManager2.default.clearInteractionHandle(handle);\n        }\n        callback && callback(result);\n      }, previousAnimation);\n    }\n\n    /**\n     * Typically only used internally.\n     */\n\n  }, {\n    key: 'stopTracking',\n    value: function stopTracking() {\n      this._tracking && this._tracking.__detach();\n      this._tracking = null;\n    }\n\n    /**\n     * Typically only used internally.\n     */\n\n  }, {\n    key: 'track',\n    value: function track(tracking) {\n      this.stopTracking();\n      this._tracking = tracking;\n    }\n  }, {\n    key: '_updateValue',\n    value: function _updateValue(value) {\n      this._value = value;\n      _flush(this);\n      for (var key in this._listeners) {\n        this._listeners[key]({ value: this.__getValue() });\n      }\n    }\n  }]);\n\n  return AnimatedValue;\n})(AnimatedWithChildren);\n\n/**\n * 2D Value for driving 2D animations, such as pan gestures.  Almost identical\n * API to normal `Animated.Value`, but multiplexed.  Contains two regular\n * `Animated.Value`s under the hood.  Example:\n *\n *```javascript\n *  class DraggableView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        pan: new Animated.ValueXY(), // inits to zero\n *      };\n *      this.state.panResponder = PanResponder.create({\n *        onStartShouldSetPanResponder: () => true,\n *        onPanResponderMove: Animated.event([null, {\n *          dx: this.state.pan.x, // x,y are Animated.Value\n *          dy: this.state.pan.y,\n *        }]),\n *        onPanResponderRelease: () => {\n *          Animated.spring(\n *            this.state.pan,         // Auto-multiplexed\n *            {toValue: {x: 0, y: 0}} // Back to zero\n *          ).start();\n *        },\n *      });\n *    }\n *    render() {\n *      return (\n *        <Animated.View\n *          {...this.state.panResponder.panHandlers}\n *          style={this.state.pan.getLayout()}>\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n */\n\nvar AnimatedValueXY = (function (_AnimatedWithChildren2) {\n  _inherits(AnimatedValueXY, _AnimatedWithChildren2);\n\n  function AnimatedValueXY(valueIn) {\n    _classCallCheck(this, AnimatedValueXY);\n\n    var _this8 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedValueXY).call(this));\n\n    var value = valueIn || { x: 0, y: 0 }; // fixme: shouldn't need `: any`\n    if (typeof value.x === 'number' && typeof value.y === 'number') {\n      _this8.x = new AnimatedValue(value.x);\n      _this8.y = new AnimatedValue(value.y);\n    } else {\n      (0, _invariant2.default)(value.x instanceof AnimatedValue && value.y instanceof AnimatedValue, 'AnimatedValueXY must be initalized with an object of numbers or ' + 'AnimatedValues.');\n      _this8.x = value.x;\n      _this8.y = value.y;\n    }\n    _this8._listeners = {};\n    return _this8;\n  }\n\n  _createClass(AnimatedValueXY, [{\n    key: 'setValue',\n    value: function setValue(value) {\n      this.x.setValue(value.x);\n      this.y.setValue(value.y);\n    }\n  }, {\n    key: 'setOffset',\n    value: function setOffset(offset) {\n      this.x.setOffset(offset.x);\n      this.y.setOffset(offset.y);\n    }\n  }, {\n    key: 'flattenOffset',\n    value: function flattenOffset() {\n      this.x.flattenOffset();\n      this.y.flattenOffset();\n    }\n  }, {\n    key: '__getValue',\n    value: function __getValue() {\n      return {\n        x: this.x.__getValue(),\n        y: this.y.__getValue()\n      };\n    }\n  }, {\n    key: 'stopAnimation',\n    value: function stopAnimation(callback) {\n      this.x.stopAnimation();\n      this.y.stopAnimation();\n      callback && callback(this.__getValue());\n    }\n  }, {\n    key: 'addListener',\n    value: function addListener(callback) {\n      var _this9 = this;\n\n      var id = String(_uniqueId++);\n      var jointCallback = function jointCallback(_ref) {\n        var number = _ref.value;\n\n        callback(_this9.__getValue());\n      };\n      this._listeners[id] = {\n        x: this.x.addListener(jointCallback),\n        y: this.y.addListener(jointCallback)\n      };\n      return id;\n    }\n  }, {\n    key: 'removeListener',\n    value: function removeListener(id) {\n      this.x.removeListener(this._listeners[id].x);\n      this.y.removeListener(this._listeners[id].y);\n      delete this._listeners[id];\n    }\n\n    /**\n     * Converts `{x, y}` into `{left, top}` for use in style, e.g.\n     *\n     *```javascript\n     *  style={this.state.anim.getLayout()}\n     *```\n     */\n\n  }, {\n    key: 'getLayout',\n    value: function getLayout() {\n      return {\n        left: this.x,\n        top: this.y\n      };\n    }\n\n    /**\n     * Converts `{x, y}` into a useable translation transform, e.g.\n     *\n     *```javascript\n     *  style={{\n     *    transform: this.state.anim.getTranslateTransform()\n     *  }}\n     *```\n     */\n\n  }, {\n    key: 'getTranslateTransform',\n    value: function getTranslateTransform() {\n      return [{ translateX: this.x }, { translateY: this.y }];\n    }\n  }]);\n\n  return AnimatedValueXY;\n})(AnimatedWithChildren);\n\nvar AnimatedInterpolation = (function (_AnimatedWithChildren3) {\n  _inherits(AnimatedInterpolation, _AnimatedWithChildren3);\n\n  function AnimatedInterpolation(parent, interpolation) {\n    _classCallCheck(this, AnimatedInterpolation);\n\n    var _this10 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedInterpolation).call(this));\n\n    _this10._parent = parent;\n    _this10._interpolation = interpolation;\n    return _this10;\n  }\n\n  _createClass(AnimatedInterpolation, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var parentValue = this._parent.__getValue();\n      (0, _invariant2.default)(typeof parentValue === 'number', 'Cannot interpolate an input which is not a number.');\n      return this._interpolation(parentValue);\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._parent.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._parent.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedInterpolation;\n})(AnimatedWithChildren);\n\nvar AnimatedAddition = (function (_AnimatedWithChildren4) {\n  _inherits(AnimatedAddition, _AnimatedWithChildren4);\n\n  function AnimatedAddition(a, b) {\n    _classCallCheck(this, AnimatedAddition);\n\n    var _this11 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedAddition).call(this));\n\n    _this11._a = a;\n    _this11._b = b;\n    return _this11;\n  }\n\n  _createClass(AnimatedAddition, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._a.__getValue() + this._b.__getValue();\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._a.__addChild(this);\n      this._b.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._a.__removeChild(this);\n      this._b.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedAddition;\n})(AnimatedWithChildren);\n\nvar AnimatedMultiplication = (function (_AnimatedWithChildren5) {\n  _inherits(AnimatedMultiplication, _AnimatedWithChildren5);\n\n  function AnimatedMultiplication(a, b) {\n    _classCallCheck(this, AnimatedMultiplication);\n\n    var _this12 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedMultiplication).call(this));\n\n    _this12._a = a;\n    _this12._b = b;\n    return _this12;\n  }\n\n  _createClass(AnimatedMultiplication, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._a.__getValue() * this._b.__getValue();\n    }\n  }, {\n    key: 'interpolate',\n    value: function interpolate(config) {\n      return new AnimatedInterpolation(this, _Interpolation2.default.create(config));\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._a.__addChild(this);\n      this._b.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._a.__removeChild(this);\n      this._b.__removeChild(this);\n    }\n  }]);\n\n  return AnimatedMultiplication;\n})(AnimatedWithChildren);\n\nvar AnimatedTransform = (function (_AnimatedWithChildren6) {\n  _inherits(AnimatedTransform, _AnimatedWithChildren6);\n\n  function AnimatedTransform(transforms) {\n    _classCallCheck(this, AnimatedTransform);\n\n    var _this13 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedTransform).call(this));\n\n    _this13._transforms = transforms;\n    return _this13;\n  }\n\n  _createClass(AnimatedTransform, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._transforms.map(function (transform) {\n        var result = {};\n        for (var key in transform) {\n          var value = transform[key];\n          if (value instanceof Animated) {\n            result[key] = value.__getValue();\n          } else {\n            result[key] = value;\n          }\n        }\n        return result;\n      });\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      return this._transforms.map(function (transform) {\n        var result = {};\n        for (var key in transform) {\n          var value = transform[key];\n          if (value instanceof Animated) {\n            result[key] = value.__getAnimatedValue();\n          } else {\n            // All transform components needed to recompose matrix\n            result[key] = value;\n          }\n        }\n        return result;\n      });\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      var _this14 = this;\n\n      this._transforms.forEach(function (transform) {\n        for (var key in transform) {\n          var value = transform[key];\n          if (value instanceof Animated) {\n            value.__addChild(_this14);\n          }\n        }\n      });\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      var _this15 = this;\n\n      this._transforms.forEach(function (transform) {\n        for (var key in transform) {\n          var value = transform[key];\n          if (value instanceof Animated) {\n            value.__removeChild(_this15);\n          }\n        }\n      });\n    }\n  }]);\n\n  return AnimatedTransform;\n})(AnimatedWithChildren);\n\nvar AnimatedStyle = (function (_AnimatedWithChildren7) {\n  _inherits(AnimatedStyle, _AnimatedWithChildren7);\n\n  function AnimatedStyle(style) {\n    _classCallCheck(this, AnimatedStyle);\n\n    var _this16 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedStyle).call(this));\n\n    style = (0, _flattenStyle2.default)(style) || {};\n    if (style.transform) {\n      style = _extends({}, style, {\n        transform: new AnimatedTransform(style.transform)\n      });\n    }\n    _this16._style = style;\n    return _this16;\n  }\n\n  _createClass(AnimatedStyle, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var style = {};\n      for (var key in this._style) {\n        var value = this._style[key];\n        if (value instanceof Animated) {\n          style[key] = value.__getValue();\n        } else {\n          style[key] = value;\n        }\n      }\n      return style;\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      var style = {};\n      for (var key in this._style) {\n        var value = this._style[key];\n        if (value instanceof Animated) {\n          style[key] = value.__getAnimatedValue();\n        }\n      }\n      return style;\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      for (var key in this._style) {\n        var value = this._style[key];\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      for (var key in this._style) {\n        var value = this._style[key];\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    }\n  }]);\n\n  return AnimatedStyle;\n})(AnimatedWithChildren);\n\nvar AnimatedProps = (function (_Animated2) {\n  _inherits(AnimatedProps, _Animated2);\n\n  function AnimatedProps(props, callback) {\n    _classCallCheck(this, AnimatedProps);\n\n    var _this17 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedProps).call(this));\n\n    if (props.style) {\n      props = _extends({}, props, {\n        style: new AnimatedStyle(props.style)\n      });\n    }\n    _this17._props = props;\n    _this17._callback = callback;\n    _this17.__attach();\n    return _this17;\n  }\n\n  _createClass(AnimatedProps, [{\n    key: '__getValue',\n    value: function __getValue() {\n      var props = {};\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          props[key] = value.__getValue();\n        } else {\n          props[key] = value;\n        }\n      }\n      return props;\n    }\n  }, {\n    key: '__getAnimatedValue',\n    value: function __getAnimatedValue() {\n      var props = {};\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          props[key] = value.__getAnimatedValue();\n        }\n      }\n      return props;\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          value.__addChild(this);\n        }\n      }\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      for (var key in this._props) {\n        var value = this._props[key];\n        if (value instanceof Animated) {\n          value.__removeChild(this);\n        }\n      }\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this._callback();\n    }\n  }]);\n\n  return AnimatedProps;\n})(Animated);\n\nfunction createAnimatedComponent(Component) {\n  var refName = 'node';\n\n  var AnimatedComponent = (function (_React$Component) {\n    _inherits(AnimatedComponent, _React$Component);\n\n    function AnimatedComponent() {\n      _classCallCheck(this, AnimatedComponent);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedComponent).apply(this, arguments));\n    }\n\n    _createClass(AnimatedComponent, [{\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this._propsAnimated && this._propsAnimated.__detach();\n      }\n    }, {\n      key: 'setNativeProps',\n      value: function setNativeProps(props) {\n        this.refs[refName].setNativeProps(props);\n      }\n    }, {\n      key: 'componentWillMount',\n      value: function componentWillMount() {\n        this.attachProps(this.props);\n      }\n    }, {\n      key: 'attachProps',\n      value: function attachProps(nextProps) {\n        var _this19 = this;\n\n        var oldPropsAnimated = this._propsAnimated;\n\n        // The system is best designed when setNativeProps is implemented. It is\n        // able to avoid re-rendering and directly set the attributes that\n        // changed. However, setNativeProps can only be implemented on leaf\n        // native components. If you want to animate a composite component, you\n        // need to re-render it. In this case, we have a fallback that uses\n        // forceUpdate.\n        var callback = function callback() {\n          if (_this19.refs[refName].setNativeProps) {\n            var value = _this19._propsAnimated.__getAnimatedValue();\n            _this19.refs[refName].setNativeProps(value);\n          } else {\n            _this19.forceUpdate();\n          }\n        };\n\n        this._propsAnimated = new AnimatedProps(nextProps, callback);\n\n        // When you call detach, it removes the element from the parent list\n        // of children. If it goes to 0, then the parent also detaches itself\n        // and so on.\n        // An optimization is to attach the new elements and THEN detach the old\n        // ones instead of detaching and THEN attaching.\n        // This way the intermediate state isn't to go to 0 and trigger\n        // this expensive recursive detaching to then re-attach everything on\n        // the very next operation.\n        oldPropsAnimated && oldPropsAnimated.__detach();\n      }\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        this.attachProps(nextProps);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        return _react2.default.createElement(Component, _extends({}, this._propsAnimated.__getValue(), {\n          ref: refName\n        }));\n      }\n    }]);\n\n    return AnimatedComponent;\n  })(_react2.default.Component);\n\n  AnimatedComponent.propTypes = {\n    style: function style(props, propName, componentName) {\n      if (!Component.propTypes) {\n        return;\n      }\n\n      for (var key in _ViewStylePropTypes2.default) {\n        if (!Component.propTypes[key] && props[key] !== undefined) {\n          console.error('You are setting the style `{ ' + key + ': ... }` as a prop. You ' + 'should nest it in a style object. ' + 'E.g. `{ style: { ' + key + ': ... } }`');\n        }\n      }\n    }\n  };\n\n  return AnimatedComponent;\n}\n\nvar AnimatedTracking = (function (_Animated3) {\n  _inherits(AnimatedTracking, _Animated3);\n\n  function AnimatedTracking(value, parent, animationClass, animationConfig, callback) {\n    _classCallCheck(this, AnimatedTracking);\n\n    var _this20 = _possibleConstructorReturn(this, Object.getPrototypeOf(AnimatedTracking).call(this));\n\n    _this20._value = value;\n    _this20._parent = parent;\n    _this20._animationClass = animationClass;\n    _this20._animationConfig = animationConfig;\n    _this20._callback = callback;\n    _this20.__attach();\n    return _this20;\n  }\n\n  _createClass(AnimatedTracking, [{\n    key: '__getValue',\n    value: function __getValue() {\n      return this._parent.__getValue();\n    }\n  }, {\n    key: '__attach',\n    value: function __attach() {\n      this._parent.__addChild(this);\n    }\n  }, {\n    key: '__detach',\n    value: function __detach() {\n      this._parent.__removeChild(this);\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      this._value.animate(new this._animationClass(_extends({}, this._animationConfig, {\n        toValue: this._animationConfig.toValue.__getValue()\n      })), this._callback);\n    }\n  }]);\n\n  return AnimatedTracking;\n})(Animated);\n\nvar add = function add(a, b) {\n  return new AnimatedAddition(a, b);\n};\n\nvar multiply = function multiply(a, b) {\n  return new AnimatedMultiplication(a, b);\n};\n\nvar maybeVectorAnim = function maybeVectorAnim(value, config, anim) {\n  if (value instanceof AnimatedValueXY) {\n    var configX = _extends({}, config);\n    var configY = _extends({}, config);\n    for (var key in config) {\n      var _config$key = config[key];\n      var x = _config$key.x;\n      var y = _config$key.y;\n\n      if (x !== undefined && y !== undefined) {\n        configX[key] = x;\n        configY[key] = y;\n      }\n    }\n    var aX = anim(value.x, configX);\n    var aY = anim(value.y, configY);\n    // We use `stopTogether: false` here because otherwise tracking will break\n    // because the second animation will get stopped before it can update.\n    return parallel([aX, aY], { stopTogether: false });\n  }\n  return null;\n};\n\nvar spring = function spring(value, config) {\n  return maybeVectorAnim(value, config, spring) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n      if (config.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(singleValue, config.toValue, SpringAnimation, singleConfig, callback));\n      } else {\n        singleValue.animate(new SpringAnimation(singleConfig), callback);\n      }\n    },\n\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar timing = function timing(value, config) {\n  return maybeVectorAnim(value, config, timing) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n      if (config.toValue instanceof Animated) {\n        singleValue.track(new AnimatedTracking(singleValue, config.toValue, TimingAnimation, singleConfig, callback));\n      } else {\n        singleValue.animate(new TimingAnimation(singleConfig), callback);\n      }\n    },\n\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar decay = function decay(value, config) {\n  return maybeVectorAnim(value, config, decay) || {\n    start: function start(callback) {\n      var singleValue = value;\n      var singleConfig = config;\n      singleValue.stopTracking();\n      singleValue.animate(new DecayAnimation(singleConfig), callback);\n    },\n\n    stop: function stop() {\n      value.stopAnimation();\n    }\n  };\n};\n\nvar sequence = function sequence(animations) {\n  var current = 0;\n  return {\n    start: function start(callback) {\n      var onComplete = function onComplete(result) {\n        if (!result.finished) {\n          callback && callback(result);\n          return;\n        }\n\n        current++;\n\n        if (current === animations.length) {\n          callback && callback(result);\n          return;\n        }\n\n        animations[current].start(onComplete);\n      };\n\n      if (animations.length === 0) {\n        callback && callback({ finished: true });\n      } else {\n        animations[current].start(onComplete);\n      }\n    },\n\n    stop: function stop() {\n      if (current < animations.length) {\n        animations[current].stop();\n      }\n    }\n  };\n};\n\n// If one is stopped, stop all.  default: true\n\nvar parallel = function parallel(animations, config) {\n  var doneCount = 0;\n  // Make sure we only call stop() at most once for each animation\n  var hasEnded = {};\n  var stopTogether = !(config && config.stopTogether === false);\n\n  var result = {\n    start: function start(callback) {\n      if (doneCount === animations.length) {\n        callback && callback({ finished: true });\n        return;\n      }\n\n      animations.forEach(function (animation, idx) {\n        var cb = function cb(endResult) {\n          hasEnded[idx] = true;\n          doneCount++;\n          if (doneCount === animations.length) {\n            doneCount = 0;\n            callback && callback(endResult);\n            return;\n          }\n\n          if (!endResult.finished && stopTogether) {\n            result.stop();\n          }\n        };\n\n        if (!animation) {\n          cb({ finished: true });\n        } else {\n          animation.start(cb);\n        }\n      });\n    },\n\n    stop: function stop() {\n      animations.forEach(function (animation, idx) {\n        !hasEnded[idx] && animation.stop();\n        hasEnded[idx] = true;\n      });\n    }\n  };\n\n  return result;\n};\n\nvar delay = function delay(time) {\n  // Would be nice to make a specialized implementation\n  return timing(new AnimatedValue(0), { toValue: 0, delay: time, duration: 0 });\n};\n\nvar stagger = function stagger(time, animations) {\n  return parallel(animations.map(function (animation, i) {\n    return sequence([delay(time * i), animation]);\n  }));\n};\n\nvar event = function event(argMapping, config) {\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var traverse = function traverse(recMapping, recEvt, key) {\n      if (typeof recEvt === 'number') {\n        (0, _invariant2.default)(recMapping instanceof AnimatedValue, 'Bad mapping of type ' + (typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) + ' for key ' + key + ', event value must map to AnimatedValue');\n        recMapping.setValue(recEvt);\n        return;\n      }\n      (0, _invariant2.default)((typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) === 'object', 'Bad mapping of type ' + (typeof recMapping === 'undefined' ? 'undefined' : _typeof(recMapping)) + ' for key ' + key);\n      (0, _invariant2.default)((typeof recEvt === 'undefined' ? 'undefined' : _typeof(recEvt)) === 'object', 'Bad event of type ' + (typeof recEvt === 'undefined' ? 'undefined' : _typeof(recEvt)) + ' for key ' + key);\n      for (var key in recMapping) {\n        traverse(recMapping[key], recEvt[key], key);\n      }\n    };\n    argMapping.forEach(function (mapping, idx) {\n      traverse(mapping, args[idx], 'arg' + idx);\n    });\n    if (config && config.listener) {\n      config.listener.apply(null, args);\n    }\n  };\n};\n\n/**\n * Animations are an important part of modern UX, and the `Animated`\n * library is designed to make them fluid, powerful, and easy to build and\n * maintain.\n *\n * The simplest workflow is to create an `Animated.Value`, hook it up to one or\n * more style attributes of an animated component, and then drive updates either\n * via animations, such as `Animated.timing`, or by hooking into gestures like\n * panning or scrolling via `Animated.event`.  `Animated.Value` can also bind to\n * props other than style, and can be interpolated as well.  Here is a basic\n * example of a container view that will fade in when it's mounted:\n *\n *```javascript\n *  class FadeInView extends React.Component {\n *    constructor(props) {\n *      super(props);\n *      this.state = {\n *        fadeAnim: new Animated.Value(0), // init opacity 0\n *      };\n *    }\n *    componentDidMount() {\n *      Animated.timing(          // Uses easing functions\n *        this.state.fadeAnim,    // The value to drive\n *        {toValue: 1},           // Configuration\n *      ).start();                // Don't forget start!\n *    }\n *    render() {\n *      return (\n *        <Animated.View          // Special animatable View\n *          style={{opacity: this.state.fadeAnim}}> // Binds\n *          {this.props.children}\n *        </Animated.View>\n *      );\n *    }\n *  }\n *```\n *\n * Note that only animatable components can be animated.  `View`, `Text`, and\n * `Image` are already provided, and you can create custom ones with\n * `createAnimatedComponent`.  These special components do the magic of binding\n * the animated values to the properties, and do targeted native updates to\n * avoid the cost of the react render and reconciliation process on every frame.\n * They also handle cleanup on unmount so they are safe by default.\n *\n * Animations are heavily configurable.  Custom and pre-defined easing\n * functions, delays, durations, decay factors, spring constants, and more can\n * all be tweaked depending on the type of animation.\n *\n * A single `Animated.Value` can drive any number of properties, and each\n * property can be run through an interpolation first.  An interpolation maps\n * input ranges to output ranges, typically using a linear interpolation but\n * also supports easing functions.  By default, it will extrapolate the curve\n * beyond the ranges given, but you can also have it clamp the output value.\n *\n * For example, you may want to think about your `Animated.Value` as going from\n * 0 to 1, but animate the position from 150px to 0px and the opacity from 0 to\n * 1. This can easily be done by modifying `style` in the example above like so:\n *\n *```javascript\n *  style={{\n *    opacity: this.state.fadeAnim, // Binds directly\n *    transform: [{\n *      translateY: this.state.fadeAnim.interpolate({\n *        inputRange: [0, 1],\n *        outputRange: [150, 0]  // 0 : 150, 0.5 : 75, 1 : 0\n *      }),\n *    }],\n *  }}>\n *```\n *\n * Animations can also be combined in complex ways using composition functions\n * such as `sequence` and `parallel`, and can also be chained together simply\n * by setting the `toValue` of one animation to be another `Animated.Value`.\n *\n * `Animated.ValueXY` is handy for 2D animations, like panning, and there are\n * other helpful additions like `setOffset` and `getLayout` to aid with typical\n * interaction patterns, like drag-and-drop.\n *\n * You can see more example usage in `AnimationExample.js`, the Gratuitous\n * Animation App, and [Animations documentation guide](docs/animations.html).\n *\n * Note that `Animated` is designed to be fully serializable so that animations\n * can be run in a high performance way, independent of the normal JavaScript\n * event loop. This does influence the API, so keep that in mind when it seems a\n * little trickier to do something compared to a fully synchronous system.\n * Checkout `Animated.Value.addListener` as a way to work around some of these\n * limitations, but use it sparingly since it might have performance\n * implications in the future.\n */\nmodule.exports = {\n  /**\n   * Standard value class for driving animations.  Typically initialized with\n   * `new Animated.Value(0);`\n   */\n  Value: AnimatedValue,\n  /**\n   * 2D value class for driving 2D animations, such as pan gestures.\n   */\n  ValueXY: AnimatedValueXY,\n\n  /**\n   * Animates a value from an initial velocity to zero based on a decay\n   * coefficient.\n   */\n  decay: decay,\n  /**\n   * Animates a value along a timed easing curve.  The `Easing` module has tons\n   * of pre-defined curves, or you can use your own function.\n   */\n  timing: timing,\n  /**\n   * Spring animation based on Rebound and Origami.  Tracks velocity state to\n   * create fluid motions as the `toValue` updates, and can be chained together.\n   */\n  spring: spring,\n\n  /**\n   * Creates a new Animated value composed from two Animated values added\n   * together.\n   */\n  add: add,\n  /**\n   * Creates a new Animated value composed from two Animated values multiplied\n   * together.\n   */\n  multiply: multiply,\n\n  /**\n   * Starts an animation after the given delay.\n   */\n  delay: delay,\n  /**\n   * Starts an array of animations in order, waiting for each to complete\n   * before starting the next.  If the current running animation is stopped, no\n   * following animations will be started.\n   */\n  sequence: sequence,\n  /**\n   * Starts an array of animations all at the same time.  By default, if one\n   * of the animations is stopped, they will all be stopped.  You can override\n   * this with the `stopTogether` flag.\n   */\n  parallel: parallel,\n  /**\n   * Array of animations may run in parallel (overlap), but are started in\n   * sequence with successive delays.  Nice for doing trailing effects.\n   */\n  stagger: stagger,\n\n  /**\n   *  Takes an array of mappings and extracts values from each arg accordingly,\n   *  then calls `setValue` on the mapped outputs.  e.g.\n   *\n   *```javascript\n   *  onScroll={Animated.event(\n   *    [{nativeEvent: {contentOffset: {x: this._scrollX}}}]\n   *    {listener},          // Optional async listener\n   *  )\n   *  ...\n   *  onPanResponderMove: Animated.event([\n   *    null,                // raw event arg ignored\n   *    {dx: this._panX},    // gestureState arg\n   *  ]),\n   *```\n   */\n  event: event,\n\n  /**\n   * Make any React component Animatable.  Used to create `Animated.View`, etc.\n   */\n  createAnimatedComponent: createAnimatedComponent,\n\n  __PropsOnlyForTests: AnimatedProps\n};"]},"metadata":{},"sourceType":"script"}